"use strict";(self["webpackChunkdemo2"]=self["webpackChunkdemo2"]||[]).push([[443],{5703:function(t,e,i){i.r(e),i.d(e,{default:function(){return E}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"artice"},[e("van-nav-bar",{attrs:{"left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" 文章详情 ")]},proxy:!0}])}),e("div",{staticClass:"container"},[e("div",{staticClass:"article-content",style:{height:"calc("+t.windowHeight+" - 100px)"}},[e("h1",{staticClass:"title"},[t._v(t._s(t.article.title||t.title))]),e("van-skeleton",{attrs:{title:"",avatar:"",row:3,loading:!t.article.title}},[e("van-cell",{staticClass:"user-info",attrs:{center:""}},[e("div",{staticClass:"name",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.article.author))]),e("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:t.article.avatar},slot:"icon"}),e("div",{staticClass:"pubdate",attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.article.time))])],1),e("div",{staticClass:"markdown-body"},[t._v(" "+t._s(t.article.content)+" ")])],1),e("van-divider",{style:{borderColor:"#999"}}),e("div",{staticClass:"section-title2"},[t._v("热门评论")]),e("div",[e("van-list",{attrs:{finished:t.commentFinished},on:{load:t.get_comment_list},scopedSlots:t._u([{key:"finished",fn:function(){return[e("div",[0===t.commentList.length?e("p",[t._v("抢沙发")]):e("p",[t._v("没有更多数据了")])])]},proxy:!0}]),model:{value:t.commentLoading,callback:function(e){t.commentLoading=e},expression:"commentLoading"}},t._l(t.commentList,(function(i,n){return e("van-cell",{key:n,staticClass:"comment-item"},[e("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:i.info.avatar},slot:"icon"}),e("div",{attrs:{slot:"title"},on:{click:function(e){return e.stopPropagation(),t.openReply(i,n)}},slot:"title"},[e("div",{staticClass:"title-w"},[e("div",{staticClass:"name"},[t._v(t._s(i.info.nickname))]),e("div",{staticClass:"like-w"},[e("van-icon",{staticClass:"like-icon",class:{liked:i.is_like},attrs:{name:"good-job"},on:{click:function(e){return e.stopPropagation(),t.toggleCommentLike(i._id,i.is_like,n)}}}),e("span",{staticClass:"like-count"},[t._v(t._s(0==i.like_count?"":i.like_count))])],1)]),e("div",{staticClass:"content"},[t._v(t._s(i.content))]),e("div",{staticClass:"info"},[e("span",{staticClass:"pubdate"},[t._v(t._s(t._f("formatDate")(i.create_time)))]),e("van-button",{staticClass:"reply-btn",attrs:{round:"",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.PopupShow(1,i.info.nickname,i._id,i,n)}}},[t._v(t._s(0==i.reply_num?"":i.reply_num)+"回复")])],1)])],1)})),1)],1)],1)]),e("div",{staticClass:"article-bottom"},[e("van-button",{staticClass:"comment-btn",attrs:{type:"default",round:"",size:"small"},on:{click:function(e){return t.PopupShow(0)}}},[t._v("写评论")]),t.article.comment&&0==t.article.comment?e("van-icon",{attrs:{name:"comment-o",color:"#777"}}):e("van-icon",{attrs:{badge:t.article.comment,name:"comment-o",color:"#777"}}),e("van-icon",{attrs:{name:"star",color:t.article.is_fav?"#f00":"#777"},on:{click:t.togglefav}}),e("van-icon",{attrs:{color:t.article.is_like?"#f00":"#777",name:"good-job"},on:{click:t.toggleLike}}),e("van-icon",{attrs:{name:"share",color:"#777777"}})],1),e("van-popup",{attrs:{position:"bottom"},model:{value:t.commentPopupShow,callback:function(e){t.commentPopupShow=e},expression:"commentPopupShow"}},[e("div",{staticClass:"post-comment"},[e("van-field",{ref:"content",attrs:{rows:"4",autosize:"",type:"textarea",maxlength:"1000",placeholder:t.reply_placeholder,"show-word-limit":""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),e("div",{staticStyle:{width:"100%"}},[e("van-button",{attrs:{size:"large",type:"primary"},on:{click:t.submit}},[t._v("确定")])],1)],1)]),e("van-popup",{staticStyle:{height:"100%"},attrs:{overlay:!1,position:"bottom"},model:{value:t.replyPopupShow,callback:function(e){t.replyPopupShow=e},expression:"replyPopupShow"}},[e("replyCom",{attrs:{replyPopupShow:t.replyPopupShow,replyInfo:t.replyInfo,commentList:t.commentList},on:{close:function(e){t.replyPopupShow=!1}}})],1)],1)},s=[],o=(i(5623),i(3915)),a=i.n(o),r=i(855),l=i(4771),c=(0,r.d)("divider"),u=c[0],h=c[1];function d(t,e,i,n){var s;return t("div",a()([{attrs:{role:"separator"},style:{borderColor:e.borderColor},class:h((s={dashed:e.dashed,hairline:e.hairline},s["content-"+e.contentPosition]=i.default,s))},(0,l.ED)(n,!0)]),[i.default&&i.default()])}d.props={dashed:Boolean,hairline:{type:Boolean,default:!0},contentPosition:{type:String,default:"center"}};var f=u(d),m=i(408),p=(0,r.d)("skeleton"),v=p[0],g=p[1],y="100%",b="60%";function w(t,e,i,n){if(!e.loading)return i.default&&i.default();function s(){if(e.title)return t("h3",{class:g("title"),style:{width:(0,m.N)(e.titleWidth)}})}function o(){var i=[],n=e.rowWidth;function s(t){return n===y&&t===+e.row-1?b:Array.isArray(n)?n[t]:n}for(var o=0;o<e.row;o++)i.push(t("div",{class:g("row"),style:{width:(0,m.N)(s(o))}}));return i}function r(){if(e.avatar){var i=(0,m.N)(e.avatarSize);return t("div",{class:g("avatar",e.avatarShape),style:{width:i,height:i}})}}return t("div",a()([{class:g({animate:e.animate,round:e.round})},(0,l.ED)(n)]),[r(),t("div",{class:g("content")},[s(),o()])])}w.props={title:Boolean,round:Boolean,avatar:Boolean,titleWidth:[Number,String],avatarSize:[Number,String],row:{type:[Number,String],default:0},loading:{type:Boolean,default:!0},animate:{type:Boolean,default:!0},avatarShape:{type:String,default:"round"},rowWidth:{type:[Number,String,Array],default:y}};var k=v(w),C=(i(1247),i(4639)),x=i(4153),_=i(2419),S={getArticleDetail(){let{article_id:t,uid:e}=this;(0,_.PQ)({article_id:t,user_id:e}).then((t=>{0==t.code&&(t.data.time=(0,x.n)(t.data.time),this.article=t.data)}))},togglefav(){let{uid:t,article:{is_fav:e},article_id:i}=this;if(!t)return this.$toast("请先登录"),void setTimeout((()=>{this.$router.push("/login")}),1e3);e?(0,_.t)({article_id:i,user_id:t}).then((t=>{this.$toast(t.msg),0==t.code&&(this.article.is_fav=!1)})):(0,_.F_)({article_id:i,user_id:t}).then((t=>{this.$toast(t.msg),0==t.code&&(this.article.is_fav=!0)}))},toggleLike(){let{uid:t,article:{is_like:e},article_id:i}=this;if(!t)return this.$toast("请先登录"),void setTimeout((t=>{this.$router.push("/login")}));e?(0,_.Yt)({article_id:i,user_id:t}).then((t=>{this.$toast(t.msg),0==t.code&&(this.article.is_like=!1)})):(0,_.vL)({article_id:i,user_id:t}).then((t=>{this.$toast(t.msg),0==t.code&&(this.article.is_like=!0)}))},toggleCommentLike(t,e,i){if(!this.checkLogin())return;let{uid:n}=this;e?(0,_.sq)({comment_id:t,user_id:n}).then((t=>{console.log(t),this.$toast(t.msg),0==t.code&&(this.commentList[i].like_count=t.count,this.commentList[i].is_like=!1)})):(0,_.H$)({comment_id:t,user_id:n}).then((t=>{this.$toast(t.msg),0==t.code&&(this.commentList[i].like_count=t.count,this.commentList[i].is_like=!0)}))}},I=(i(7983),i(4269)),P={data(){return{skip:"",limit:"10",commentList:[],commentFinished:!1,commentLoading:!1}},components:{[I.Z.name]:I.Z},methods:{get_comment_list(){let{uid:t,article_id:e,skip:i,limit:n}=this;(0,_.KN)({user_id:t,skip:i,limit:n,article_id:e}).then((t=>{if(0==t.code){this.commentList.push(...t.data);let e=this.commentList.length;e>=t.count?this.commentFinished=!0:(this.skip=e,this.commentLoading=!1)}})).catch((t=>{}))}}},T=i(3822),$=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reply"},[e("van-nav-bar",{attrs:{title:"评论列表",border:""},on:{"click-left":t.close},scopedSlots:t._u([{key:"left",fn:function(){return[e("van-icon",{attrs:{name:"cross",color:"#333"}})]},proxy:!0}])}),e("van-cell",{staticClass:"comment-item"},[e("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:t.replyInfo.info.avatar},slot:"icon"}),e("div",{attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"title-w"},[e("div",{staticClass:"name"},[t._v(t._s(t.replyInfo.info.nickname))]),e("div",{staticClass:"like-w"},[e("van-icon",{staticClass:"like-icon",class:{liked:t.replyInfo.is_like},attrs:{name:"good-job"},on:{click:function(e){return t.Like(t.replyInfo._id,t.replyInfo.is_like,t.replyInfo.index)}}}),e("span",{staticClass:"like-count"},[t._v(t._s(0==t.replyInfo.like_count?"":t.replyInfo.like_count))])],1)]),e("div",{staticClass:"content"},[t._v(t._s(t.replyInfo.content))]),e("div",{staticClass:"info"},[e("span",{staticClass:"pubdate"},[t._v(t._s(t._f("formatDate")(t.replyInfo.create_time)))])])])],1),e("van-divider",{style:{borderColor:"#999"}}),e("div",{staticClass:"section-title2"},[t._v("热门评论")]),e("div",[e("van-list",{scopedSlots:t._u([{key:"finished",fn:function(){return[e("div",[0===t.commentLists.length?e("p",[t._v("抢沙发")]):e("p",[t._v("没有更多数据了")])])]},proxy:!0}])},t._l(t.commentLists,(function(i,n){return e("van-cell",{key:n,staticClass:"comment-item"},[e("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:i.info.avatar},slot:"icon"}),e("div",{attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"title-w"},[e("div",{staticClass:"name"},[t._v(t._s(i.info.nickname))]),e("div",{staticClass:"like-w"},[e("van-icon",{staticClass:"like-icon",class:{liked:i.is_like},attrs:{name:"good-job"},on:{click:function(e){return t.Like(i._id,i.is_like,n,2)}}}),e("span",{staticClass:"like-count"},[t._v(t._s(0==i.like_count?"":i.like_count))])],1)]),e("div",{staticClass:"content"},[t._v(t._s(i.content))]),e("div",{staticClass:"info"},[e("span",{staticClass:"pubdate"},[t._v(t._s(t._f("formatDate")(i.create_time)))])])])],1)})),1)],1)],1)},Z=[],B={name:"replyCom",components:{[C.Z.name]:C.Z,[f.name]:f},props:{replyInfo:{default:{}},commentList:{default:[]},replyPopupShow:{default:""}},computed:{...(0,T.rn)(["uid"])},filters:{formatDate:function(t){if(null==t)return"";{let e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;let s=e.getDate();return s=s<10?"0"+s:s,i+"-"+n+"-"+s}}},data(){return{commentLists:[]}},mounted(){},watch:{replyPopupShow:{immediate:!0,handler(t,e){t&&this.get_reply_list()}}},methods:{get_reply_list(){let{uid:t}=this,{article_id:e,_id:i}=this.replyInfo;(0,_.vi)({article_id:e,skip:"",limit:"",user_id:t,reply_comment_id:i}).then((t=>{this.commentLists=t.data})).catch((t=>{}))},close(){this.$emit("close")},Like(t,e,i,n){let{uid:s}=this;e?(0,_.sq)({comment_id:t,user_id:s}).then((t=>{console.log(t),this.$toast(t.msg),0==t.code&&(2==n?(this.commentLists[i].like_count-=1,this.commentLists[i].is_like=!1):(this.replyInfo.is_like=!1,this.replyInfo.like_count-=1,this.commentList[i].like_count=this.replyInfo.like_count,this.commentList[i].is_like=this.replyInfo.is_like))})):(0,_.H$)({comment_id:t,user_id:s}).then((t=>{this.$toast(t.msg),0==t.code&&(2==n?(this.commentLists[i].like_count+=1,this.commentLists[i].is_like=!0):(this.replyInfo.is_like=!0,this.replyInfo.like_count+=1,this.commentList[i].like_count=this.replyInfo.like_count,this.commentList[i].is_like=this.replyInfo.is_like))}))}}},D=B,L=i(1001),A=(0,L.Z)(D,$,Z,!1,null,"7c827fc6",null),O=A.exports,V={data(){return{content:"",title:"",article_id:"",article:{},commentPopupShow:!1,comment_type:0,reply_placeholder:"请留下您的精彩评论",reply_comment_id:"",replyPopupShow:!1,replyInfo:{}}},filters:{formatDate:function(t){if(null==t)return"";{let e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;let s=e.getDate();return s=s<10?"0"+s:s,i+"-"+n+"-"+s}}},mixins:[P],computed:{...(0,T.rn)(["uid","userInfo"])},created(){let{title:t,article_id:e}=this.$route.query;this.title=t,this.article_id=e,this.getArticleDetail()},methods:{openReply(t,e){this.replyPopupShow=!0,this.replyInfo={...t,index:e}},...S,submit(){let{content:t,uid:e,article_id:i,comment_type:n,reply_comment_id:s}=this;t=t.trim(),"string"==typeof t&&0!==t.length?(0,_.Ir)({content:t,user_id:e,article_id:i,comment_type:n,reply_comment_id:s}).then((s=>{if(this.$toast(s.msg),0==s.code)if(this.commentPopupShow=!1,this.content="",this.article.comment++,0==n){let{avatar:o,nickname:a,username:r}=this.userInfo,l={article_id:i,comment_type:n,content:t,create_time:(new Date).getTime(),like_count:0,reply_comment_id:"",reply_num:0,user_id:e,info:{avatar:o,nickname:a,username:r,_id:e},_id:s.data.id};this.commentList.unshift(l)}else this.replyInfo.reply_num++,this.replyPopupShow=!0})).catch((t=>{})):this.$toast("格式错误")},PopupShow(t=0,e,i,n,s){this.checkLogin()&&(this.comment_type=t,0==t?(this.reply_placeholder="留下您的精彩评论",this.reply_comment_id=""):(this.replyInfo=n,this.replyInfo.index=s,this.reply_placeholder="回复："+e,this.reply_comment_id=i),this.commentPopupShow=!0,this.$nextTick((function(){this.$refs.content.focus()})))}},components:{replyCom:O,[C.Z.name]:C.Z,[k.name]:k,[f.name]:f}},N=V,z=(0,L.Z)(N,n,s,!1,null,"21aca6e6",null),E=z.exports},6397:function(t,e,i){i.r(e),i.d(e,{default:function(){return g}});var n=function(){var t=this,e=t._self._c;return e("div",[e("commonListVue",{attrs:{API:t.get_history_list,params:{uid:t.$store.state.uid}},scopedSlots:t._u([{key:"default",fn:function({list:i}){return t._l(i,(function(i,n){return e("li",{key:n},[t._v(" "+t._s(i)+" ")])}))}}])})],1)},s=[],o=function(){var t=this,e=t._self._c;return e("div",[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多数据了","immediate-check":t.immediateCheck},on:{load:t.getList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._t("default",null,{list:t.list})],2)],1)},a=[],r=(i(7983),i(4269)),l={data(){return{skip:0,loading:!1,finished:!1,list:[]}},components:{[r.Z.name]:r.Z},props:{limit:{default:10,type:Number},immediateCheck:{type:Boolean,default:!0},API:{type:Function,require:!0},params:{type:Object}},methods:{getList(){let{skip:t,limit:e,params:i}=this;console.log(this.params),this.API({skip:t,limit:e,...i}).then((t=>{if(0==t.code){this.list.push(...t.data);let e=this.list.length;e>=t.count?this.finished=!0:(this.skip=e,this.loading=!1)}}))}}},c=l,u=i(1001),h=(0,u.Z)(c,o,a,!1,null,null,null),d=h.exports,f=i(2419),m={components:{commonListVue:d},data(){return{get_history_list:f.vq}}},p=m,v=(0,u.Z)(p,n,s,!1,null,null,null),g=v.exports},815:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ls"},[e("div",[e("van-nav-bar",{attrs:{"left-text":"返回","left-arrow":""},on:{"click-left":t.go},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" 收藏列表")]},proxy:!0}])})],1),e("div",{staticClass:"box"},[e("ul",t._l(t.lists,(function(i,n){return e("li",{key:n,staticClass:"box",on:{click:function(e){return t.to(i)}}},[e("div",{staticClass:"info"},[e("h3",[t._v(" "+t._s(i.title)+" ")]),e("div",{staticClass:"imgs"},t._l(i.imageSrc,(function(t,i){return e("img",{key:i,attrs:{src:t,alt:""}})})),0),e("div",[e("span",[t._v(" 评论人"+t._s(i.author)+" ")]),e("span",[t._v(" 时间 "+t._s(t._f("formatDate")(i.time))+" ")]),e("span",{on:{click:function(e){return e.stopPropagation(),t.quxiao(i,n)}}},[t._v(" 取消收藏 ")])])])])})),0)])])},s=[],o=i(2419),a=i(3822),r={filters:{formatDate:function(t){if(null==t)return"";{let e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;let s=e.getDate();return s=s<10?"0"+s:s,i+"-"+n+"-"+s}}},computed:{...(0,a.rn)(["uid"])},data(){return{lists:[]}},methods:{to(t){this.$router.push({path:"/artice",query:{title:t.title,article_id:t._id}})},go(){this.$router.go(-1)},quxiao(t,e){let{uid:i}=this,{_id:n}=this.lists[e];this.lists.splice(e,1),(0,o.t)({user_id:i,article_id:n}).then((t=>{console.log(t)})).catch((t=>{}))}},mounted(){let{uid:t}=this;(0,o.Dd)({limit:"",skip:"",user_id:t}).then((t=>{this.lists=t.data}))}},l=r,c=i(1001),u=(0,c.Z)(l,n,s,!1,null,"685429ad",null),h=u.exports},1049:function(t,e,i){i.r(e),i.d(e,{default:function(){return H}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"edit"},[e("van-nav-bar",{attrs:{title:"修改信息","left-arrow":""},on:{"click-left":t.onClickLeft}}),e("div",{staticClass:"container"},[e("input",{ref:"file",attrs:{id:"file",type:"file",hidden:"",accept:"image/*"},on:{change:t.change}}),e("van-cell",{attrs:{title:"头像",center:""}},[e("label",{attrs:{for:"file"}},[e("van-image",{attrs:{width:"50",height:"50",round:"",fit:"cover",src:t.userInfo.avatar}})],1)]),e("van-cell",{attrs:{title:"昵称","is-link":"",value:t.userInfo.nickname},on:{click:t.down}}),e("van-dialog",{attrs:{title:"修改昵称","show-cancel-button":""},on:{confirm:t.confirm},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("van-cell-group",[e("van-field",{attrs:{placeholder:"请输入昵称"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)],1),e("van-cell",{attrs:{title:"性别","is-link":"",value:t.userInfo.sex},on:{click:t.setPicker}}),e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:function(e){t.showPicker=!1},confirm:t.sexConfirm}})],1),e("van-cell",{attrs:{title:"生日","is-link":"",value:t.userInfo.birthday},on:{click:function(e){t.birPicker=!0}}}),e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.birPicker,callback:function(e){t.birPicker=e},expression:"birPicker"}},[e("van-datetime-picker",{attrs:{type:"date",title:"选择年月日","min-date":t.minDate,"max-date":t.maxDate},on:{change:t.birchange,confirm:t.birconfirm,cancel:t.bircancel},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),e("div",{staticStyle:{margin:"30px 50px"}},[e("van-button",{attrs:{round:"",block:"",type:"primary",size:"normal","native-type":"submit"},on:{click:t.submit}},[t._v("确定")])],1)],1)],1)},s=[],o=(i(8618),i(5705)),a=(i(1247),i(4639)),r=i(3822),l=i(2419),c=(i(9293),i(7722)),u={data(){return{showPicker:!1,columns:["男","女"]}},components:{[c.Z.name]:c.Z},methods:{setPicker(){this.showPicker=!0},sexConfirm(t){this.userInfo.sex=t,this.showPicker=!1}}},h=(i(5623),i(6121),i(5941),i(9299)),d=i(855),f=i(8701),m=i(4535),p=i(668);function v(t,e){if(t<0)return[];var i=-1,n=Array(t);while(++i<t)n[i]=e(i);return n}function g(t){if(!t)return 0;while((0,p.i)(parseInt(t,10))){if(!(t.length>1))return 0;t=t.slice(1)}return parseInt(t,10)}function y(t,e){return 32-new Date(t,e-1,32).getDate()}var b=i(7111),w=(0,h.Z)({},b.i,{value:null,filter:Function,columnsOrder:Array,showToolbar:{type:Boolean,default:!0},formatter:{type:Function,default:function(t,e){return e}}}),k={data:function(){return{innerValue:this.formatValue(this.value)}},computed:{originColumns:function(){var t=this;return this.ranges.map((function(e){var i=e.type,n=e.range,s=v(n[1]-n[0]+1,(function(t){var e=(0,f.B)(n[0]+t);return e}));return t.filter&&(s=t.filter(i,s)),{type:i,values:s}}))},columns:function(){var t=this;return this.originColumns.map((function(e){return{values:e.values.map((function(i){return t.formatter(e.type,i)}))}}))}},watch:{columns:"updateColumnValue",innerValue:function(t,e){e?this.$emit("input",t):this.$emit("input",null)}},mounted:function(){var t=this;this.updateColumnValue(),this.$nextTick((function(){t.updateInnerValue()}))},methods:{getPicker:function(){return this.$refs.picker},getProxiedPicker:function(){var t=this,e=this.$refs.picker;if(e){var i=function(i){return function(){e[i].apply(e,arguments),t.updateInnerValue()}};return(0,h.Z)({},e,{setValues:i("setValues"),setIndexes:i("setIndexes"),setColumnIndex:i("setColumnIndex"),setColumnValue:i("setColumnValue")})}},onConfirm:function(){this.$emit("input",this.innerValue),this.$emit("confirm",this.innerValue)},onCancel:function(){this.$emit("cancel")}},render:function(){var t=this,e=arguments[0],i={};return Object.keys(b.i).forEach((function(e){i[e]=t[e]})),e(c.Z,{ref:"picker",attrs:{columns:this.columns,readonly:this.readonly},scopedSlots:this.$scopedSlots,on:{change:this.onChange,confirm:this.onConfirm,cancel:this.onCancel},props:(0,h.Z)({},i)})}},C=(0,d.d)("time-picker"),x=C[0],_=x({mixins:[k],props:(0,h.Z)({},w,{minHour:{type:[Number,String],default:0},maxHour:{type:[Number,String],default:23},minMinute:{type:[Number,String],default:0},maxMinute:{type:[Number,String],default:59}}),computed:{ranges:function(){return[{type:"hour",range:[+this.minHour,+this.maxHour]},{type:"minute",range:[+this.minMinute,+this.maxMinute]}]}},watch:{filter:"updateInnerValue",minHour:function(){var t=this;this.$nextTick((function(){t.updateInnerValue()}))},maxHour:function(t){var e=this.innerValue.split(":"),i=e[0],n=e[1];i>=t?(this.innerValue=this.formatValue(t+":"+n),this.updateColumnValue()):this.updateInnerValue()},minMinute:"updateInnerValue",maxMinute:function(t){var e=this.innerValue.split(":"),i=e[0],n=e[1];n>=t?(this.innerValue=this.formatValue(i+":"+t),this.updateColumnValue()):this.updateInnerValue()},value:function(t){t=this.formatValue(t),t!==this.innerValue&&(this.innerValue=t,this.updateColumnValue())}},methods:{formatValue:function(t){t||(t=(0,f.B)(this.minHour)+":"+(0,f.B)(this.minMinute));var e=t.split(":"),i=e[0],n=e[1];return i=(0,f.B)((0,m.w6)(i,this.minHour,this.maxHour)),n=(0,f.B)((0,m.w6)(n,this.minMinute,this.maxMinute)),i+":"+n},updateInnerValue:function(){var t=this.getPicker().getIndexes(),e=t[0],i=t[1],n=this.originColumns,s=n[0],o=n[1],a=s.values[e]||s.values[0],r=o.values[i]||o.values[0];this.innerValue=this.formatValue(a+":"+r),this.updateColumnValue()},onChange:function(t){var e=this;this.updateInnerValue(),this.$nextTick((function(){e.$nextTick((function(){e.updateInnerValue(),e.$emit("change",t)}))}))},updateColumnValue:function(){var t=this,e=this.formatter,i=this.innerValue.split(":"),n=[e("hour",i[0]),e("minute",i[1])];this.$nextTick((function(){t.getPicker().setValues(n)}))}}});function S(t,e){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},S(t,e)}function I(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function P(t,e,i){return P=I()?Reflect.construct.bind():function(t,e,i){var n=[null];n.push.apply(n,e);var s=Function.bind.apply(t,n),o=new s;return i&&S(o,i.prototype),o},P.apply(null,arguments)}function T(t){return"[object Date]"===Object.prototype.toString.call(t)&&!(0,p.i)(t.getTime())}var $=(new Date).getFullYear(),Z=(0,d.d)("date-picker"),B=Z[0],D=B({mixins:[k],props:(0,h.Z)({},w,{type:{type:String,default:"datetime"},minDate:{type:Date,default:function(){return new Date($-10,0,1)},validator:T},maxDate:{type:Date,default:function(){return new Date($+10,11,31)},validator:T}}),watch:{filter:"updateInnerValue",minDate:function(){var t=this;this.$nextTick((function(){t.updateInnerValue()}))},maxDate:function(t){this.innerValue.valueOf()>=t.valueOf()?this.innerValue=t:this.updateInnerValue()},value:function(t){t=this.formatValue(t),t&&t.valueOf()!==this.innerValue.valueOf()&&(this.innerValue=t)}},computed:{ranges:function(){var t=this.getBoundary("max",this.innerValue?this.innerValue:this.minDate),e=t.maxYear,i=t.maxDate,n=t.maxMonth,s=t.maxHour,o=t.maxMinute,a=this.getBoundary("min",this.innerValue?this.innerValue:this.minDate),r=a.minYear,l=a.minDate,c=a.minMonth,u=a.minHour,h=a.minMinute,d=[{type:"year",range:[r,e]},{type:"month",range:[c,n]},{type:"day",range:[l,i]},{type:"hour",range:[u,s]},{type:"minute",range:[h,o]}];switch(this.type){case"date":d=d.slice(0,3);break;case"year-month":d=d.slice(0,2);break;case"month-day":d=d.slice(1,3);break;case"datehour":d=d.slice(0,4);break}if(this.columnsOrder){var f=this.columnsOrder.concat(d.map((function(t){return t.type})));d.sort((function(t,e){return f.indexOf(t.type)-f.indexOf(e.type)}))}return d}},methods:{formatValue:function(t){var e=this;if(!T(t))return null;var i=new Date(this.minDate),n=new Date(this.maxDate),s={year:"getFullYear",month:"getMonth",day:"getDate",hour:"getHours",minute:"getMinutes"};if(this.originColumns){var o=this.originColumns.map((function(t,o){var a=t.type,r=t.values,l=e.ranges[o].range,c=i[s[a]](),u=n[s[a]](),h="month"===a?+r[0]-1:+r[0],d="month"===a?+r[r.length-1]-1:+r[r.length-1];return{type:a,values:[c<l[0]?Math.max(c,h):h||c,u>l[1]?Math.min(u,d):d||u]}}));if("month-day"===this.type){var a=(this.innerValue||this.minDate).getFullYear();o.unshift({type:"year",values:[a,a]})}var r=Object.keys(s).map((function(t){var e;return null==(e=o.filter((function(e){return e.type===t}))[0])?void 0:e.values})).filter((function(t){return t}));i=P(Date,r.map((function(t){return g(t[0])}))),n=P(Date,r.map((function(t){return g(t[1])})))}return t=Math.max(t,i.getTime()),t=Math.min(t,n.getTime()),new Date(t)},getBoundary:function(t,e){var i,n=this[t+"Date"],s=n.getFullYear(),o=1,a=1,r=0,l=0;return"max"===t&&(o=12,a=y(e.getFullYear(),e.getMonth()+1),r=23,l=59),e.getFullYear()===s&&(o=n.getMonth()+1,e.getMonth()+1===o&&(a=n.getDate(),e.getDate()===a&&(r=n.getHours(),e.getHours()===r&&(l=n.getMinutes())))),i={},i[t+"Year"]=s,i[t+"Month"]=o,i[t+"Date"]=a,i[t+"Hour"]=r,i[t+"Minute"]=l,i},updateInnerValue:function(){var t,e,i,n=this,s=this.type,o=this.getPicker().getIndexes(),a=function(t){var e=0;n.originColumns.forEach((function(i,n){t===i.type&&(e=n)}));var i=n.originColumns[e].values;return g(i[o[e]])};"month-day"===s?(t=(this.innerValue||this.minDate).getFullYear(),e=a("month"),i=a("day")):(t=a("year"),e=a("month"),i="year-month"===s?1:a("day"));var r=y(t,e);i=i>r?r:i;var l=0,c=0;"datehour"===s&&(l=a("hour")),"datetime"===s&&(l=a("hour"),c=a("minute"));var u=new Date(t,e-1,i,l,c);this.innerValue=this.formatValue(u)},onChange:function(t){var e=this;this.updateInnerValue(),this.$nextTick((function(){e.$nextTick((function(){e.updateInnerValue(),e.$emit("change",t)}))}))},updateColumnValue:function(){var t=this,e=this.innerValue?this.innerValue:this.minDate,i=this.formatter,n=this.originColumns.map((function(t){switch(t.type){case"year":return i("year",""+e.getFullYear());case"month":return i("month",(0,f.B)(e.getMonth()+1));case"day":return i("day",(0,f.B)(e.getDate()));case"hour":return i("hour",(0,f.B)(e.getHours()));case"minute":return i("minute",(0,f.B)(e.getMinutes()));default:return null}}));this.$nextTick((function(){t.getPicker().setValues(n)}))}}}),L=(0,d.d)("datetime-picker"),A=L[0],O=L[1],V=A({props:(0,h.Z)({},_.props,D.props),methods:{getPicker:function(){return this.$refs.root.getProxiedPicker()}},render:function(){var t=arguments[0],e="time"===this.type?_:D;return t(e,{ref:"root",class:O(),scopedSlots:this.$scopedSlots,props:(0,h.Z)({},this.$props),on:(0,h.Z)({},this.$listeners)})}}),N=i(4153),z={components:{[V.name]:V},data(){return{birPicker:!1,minDate:new Date(1920,0,1),maxDate:new Date,currentDate:""}},methods:{birconfirm(t){console.log(t);let e=(0,N.n)(t);this.userInfo.birthday=e,this.birPicker=!1},birchange(t,e,i){},bircancel(t){this.birPicker=!1}}},E={name:"edit",components:{[a.Z.name]:a.Z,[o.Z.Component.name]:o.Z.Component},mixins:[u,z],data(){return{userInfo:{},value:"",show:!1}},methods:{down(){this.show=!0},mounted(){console.log("mou")},activated(){console.log(2)},deactivated(){console.log(1)},confirm(){this.userInfo.nickname=this.value},...(0,r.nv)(["upload"]),async submit(){let{_id:t,nickname:e,avatar:i,file:n,sex:s,birthday:o}=this.userInfo;if(n){let a=[{file:n}],r=await this.upload(a);i=r[0],(0,l.ic)({uid:t,nickname:e,avatar:i,sex:s,birthday:o}).then((n=>{console.log(n),0==n.code&&(this.$toast(n.msg),this.$store.commit("change",{key:"userInfo",value:{_id:t,nickname:e,avatar:i,sex:s,birthday:o}}),setTimeout((()=>{this.$router.push("/user")}),1e3))}))}else(0,l.ic)({uid:t,nickname:e,avatar:i,sex:s,birthday:o}).then((n=>{console.log(n),0==n.code?(this.$toast(n.msg),this.$store.commit("change",{key:"userInfo",value:{_id:t,nickname:e,avatar:i,sex:s,birthday:o}}),setTimeout((()=>{this.$router.push("/user")}),1e3)):this.$toast("请修改信息后重试")}))},onClickLeft(){this.$router.go(-1)},async change(t){let e=t.target.files[0];this.userInfo.file=e;let i=new FileReader;i.readAsDataURL(e),i.onload=t=>{this.userInfo.avatar=t.target.result}}},watch:{"$store.state.userInfo":{immediate:!0,handler(t,e){this.userInfo=JSON.parse(JSON.stringify(t))}}},created(){}},M=E,Y=i(1001),F=(0,Y.Z)(M,n,s,!1,null,"3ad8464b",null),H=F.exports},2335:function(t,e,i){i.r(e),i.d(e,{default:function(){return lt}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"fabu"},[e("van-nav-bar",{attrs:{title:"发布"}}),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"title",label:"标题",placeholder:"标题","label-width":"30px",rules:[{required:!0,message:"请填写标题"}]},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),e("van-field",{attrs:{value:t.cate_name,label:"分类","label-width":"30px",placeholder:"请选择分类",readonlyf:"",name:"cate_name"},on:{click:function(e){t.catePickerShow=!0}}}),e("van-field",{attrs:{name:"content",label:"内容","label-width":"30px",placeholder:"内容",type:"textarea",rules:[{required:!0,message:"请填写内容"}]},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),e("van-field",{attrs:{label:"图片","label-width":"30px",name:"fileList"},scopedSlots:t._u([{key:"input",fn:function(){return[e("van-uploader",{attrs:{multiple:"","max-count":3},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})]},proxy:!0}])}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1),e("van-popup",{style:{height:"40%"},attrs:{position:"bottom"},model:{value:t.catePickerShow,callback:function(e){t.catePickerShow=e},expression:"catePickerShow"}},[e("van-picker",{attrs:{title:"请选择","show-toolbar":"",columns:t.cate,"value-key":"name"},on:{confirm:t.onConfirm,cancel:function(e){t.catePickerShow=!1}}})],1),e("BomViem")],1)},s=[],o=(i(5623),i(4966),i(4933),i(3671),i(43),i(3979),i(6121),i(9299)),a=i(3370),r=i(855),l=i(408);function c(t){return Array.isArray(t)?t:[t]}function u(t,e){return new Promise((function(i){if("file"!==e){var n=new FileReader;n.onload=function(t){i(t.target.result)},"dataUrl"===e?n.readAsDataURL(t):"text"===e&&n.readAsText(t)}else i(null)}))}function h(t,e){return c(t).some((function(t){return!!t&&((0,a.mf)(e)?e(t):t.size>e)}))}var d=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg)/i;function f(t){return d.test(t)}function m(t){return!!t.isImage||(t.file&&t.file.type?0===t.file.type.indexOf("image"):t.url?f(t.url):!!t.content&&0===t.content.indexOf("data:image"))}var p={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}},v=i(9858),g=i(4639),y=i(4958),b=i(6369),w=(0,r.d)("image-preview"),k=w[0],C=w[1],x=i(7846),_=i(3969),S=i(5590),I=i(4292),P=i(5781),T=i(7799),$=i(4535),Z=i(2115),B=(0,r.d)("swipe"),D=B[0],L=B[1],A=D({mixins:[_.D,(0,Z.G)("vanSwipe"),(0,S.X)((function(t,e){t(window,"resize",this.resize,!0),t(window,"orientationchange",this.resize,!0),t(window,"visibilitychange",this.onVisibilityChange),e?this.initialize():this.clear()}))],props:{width:[Number,String],height:[Number,String],autoplay:[Number,String],vertical:Boolean,lazyRender:Boolean,indicatorColor:String,loop:{type:Boolean,default:!0},duration:{type:[Number,String],default:500},touchable:{type:Boolean,default:!0},initialSwipe:{type:[Number,String],default:0},showIndicators:{type:Boolean,default:!0},stopPropagation:{type:Boolean,default:!0}},data:function(){return{rect:null,offset:0,active:0,deltaX:0,deltaY:0,swiping:!1,computedWidth:0,computedHeight:0}},watch:{children:function(){this.initialize()},initialSwipe:function(){this.initialize()},autoplay:function(t){t>0?this.autoPlay():this.clear()}},computed:{count:function(){return this.children.length},maxCount:function(){return Math.ceil(Math.abs(this.minOffset)/this.size)},delta:function(){return this.vertical?this.deltaY:this.deltaX},size:function(){return this[this.vertical?"computedHeight":"computedWidth"]},trackSize:function(){return this.count*this.size},activeIndicator:function(){return(this.active+this.count)%this.count},isCorrectDirection:function(){var t=this.vertical?"vertical":"horizontal";return this.direction===t},trackStyle:function(){var t={transitionDuration:(this.swiping?0:this.duration)+"ms",transform:"translate"+(this.vertical?"Y":"X")+"("+this.offset+"px)"};if(this.size){var e=this.vertical?"height":"width",i=this.vertical?"width":"height";t[e]=this.trackSize+"px",t[i]=this[i]?this[i]+"px":""}return t},indicatorStyle:function(){return{backgroundColor:this.indicatorColor}},minOffset:function(){return(this.vertical?this.rect.height:this.rect.width)-this.size*this.count}},mounted:function(){this.bindTouchEvent(this.$refs.track)},methods:{initialize:function(t){if(void 0===t&&(t=+this.initialSwipe),this.$el&&!(0,I.x)(this.$el)){clearTimeout(this.timer);var e={width:this.$el.offsetWidth,height:this.$el.offsetHeight};this.rect=e,this.swiping=!0,this.active=t,this.computedWidth=+this.width||e.width,this.computedHeight=+this.height||e.height,this.offset=this.getTargetOffset(t),this.children.forEach((function(t){t.offset=0})),this.autoPlay()}},resize:function(){this.initialize(this.activeIndicator)},onVisibilityChange:function(){document.hidden?this.clear():this.autoPlay()},onTouchStart:function(t){this.touchable&&(this.clear(),this.touchStartTime=Date.now(),this.touchStart(t),this.correctPosition())},onTouchMove:function(t){this.touchable&&this.swiping&&(this.touchMove(t),this.isCorrectDirection&&((0,P.PF)(t,this.stopPropagation),this.move({offset:this.delta})))},onTouchEnd:function(){if(this.touchable&&this.swiping){var t=this.size,e=this.delta,i=Date.now()-this.touchStartTime,n=e/i,s=Math.abs(n)>.25||Math.abs(e)>t/2;if(s&&this.isCorrectDirection){var o=this.vertical?this.offsetY:this.offsetX,a=0;a=this.loop?o>0?e>0?-1:1:0:-Math[e>0?"ceil":"floor"](e/t),this.move({pace:a,emitChange:!0})}else e&&this.move({pace:0});this.swiping=!1,this.autoPlay()}},getTargetActive:function(t){var e=this.active,i=this.count,n=this.maxCount;return t?this.loop?(0,$.w6)(e+t,-1,i):(0,$.w6)(e+t,0,n):e},getTargetOffset:function(t,e){void 0===e&&(e=0);var i=t*this.size;this.loop||(i=Math.min(i,-this.minOffset));var n=e-i;return this.loop||(n=(0,$.w6)(n,this.minOffset,0)),n},move:function(t){var e=t.pace,i=void 0===e?0:e,n=t.offset,s=void 0===n?0:n,o=t.emitChange,a=this.loop,r=this.count,l=this.active,c=this.children,u=this.trackSize,h=this.minOffset;if(!(r<=1)){var d=this.getTargetActive(i),f=this.getTargetOffset(d,s);if(a){if(c[0]&&f!==h){var m=f<h;c[0].offset=m?u:0}if(c[r-1]&&0!==f){var p=f>0;c[r-1].offset=p?-u:0}}this.active=d,this.offset=f,o&&d!==l&&this.$emit("change",this.activeIndicator)}},prev:function(){var t=this;this.correctPosition(),this.resetTouchStatus(),(0,T.d1)((function(){t.swiping=!1,t.move({pace:-1,emitChange:!0})}))},next:function(){var t=this;this.correctPosition(),this.resetTouchStatus(),(0,T.d1)((function(){t.swiping=!1,t.move({pace:1,emitChange:!0})}))},swipeTo:function(t,e){var i=this;void 0===e&&(e={}),this.correctPosition(),this.resetTouchStatus(),(0,T.d1)((function(){var n;n=i.loop&&t===i.count?0===i.active?0:t:t%i.count,e.immediate?(0,T.d1)((function(){i.swiping=!1})):i.swiping=!1,i.move({pace:n-i.active,emitChange:!0})}))},correctPosition:function(){this.swiping=!0,this.active<=-1&&this.move({pace:this.count}),this.active>=this.count&&this.move({pace:-this.count})},clear:function(){clearTimeout(this.timer)},autoPlay:function(){var t=this,e=this.autoplay;e>0&&this.count>1&&(this.clear(),this.timer=setTimeout((function(){t.next(),t.autoPlay()}),e))},genIndicator:function(){var t=this,e=this.$createElement,i=this.count,n=this.activeIndicator,s=this.slots("indicator");return s||(this.showIndicators&&i>1?e("div",{class:L("indicators",{vertical:this.vertical})},[Array.apply(void 0,Array(i)).map((function(i,s){return e("i",{class:L("indicator",{active:s===n}),style:s===n?t.indicatorStyle:null})}))]):void 0)}},render:function(){var t=arguments[0];return t("div",{class:L()},[t("div",{ref:"track",style:this.trackStyle,class:L("track",{vertical:this.vertical})},[this.slots()]),this.genIndicator()])}}),O=(0,r.d)("swipe-item"),V=O[0],N=O[1],z=V({mixins:[(0,Z.j)("vanSwipe")],data:function(){return{offset:0,inited:!1,mounted:!1}},mounted:function(){var t=this;this.$nextTick((function(){t.mounted=!0}))},computed:{style:function(){var t={},e=this.parent,i=e.size,n=e.vertical;return i&&(t[n?"height":"width"]=i+"px"),this.offset&&(t.transform="translate"+(n?"Y":"X")+"("+this.offset+"px)"),t},shouldRender:function(){var t=this.index,e=this.inited,i=this.parent,n=this.mounted;if(!i.lazyRender||e)return!0;if(!n)return!1;var s=i.activeIndicator,o=i.count-1,a=0===s&&i.loop?o:s-1,r=s===o&&i.loop?0:s+1,l=t===s||t===a||t===r;return l&&(this.inited=!0),l}},render:function(){var t=arguments[0];return t("div",{class:N(),style:this.style,on:(0,o.Z)({},this.$listeners)},[this.shouldRender&&this.slots()])}});function E(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}var M,Y={mixins:[_.D],props:{src:String,show:Boolean,active:Number,minZoom:[Number,String],maxZoom:[Number,String],rootWidth:Number,rootHeight:Number},data:function(){return{scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,imageRatio:0,displayWidth:0,displayHeight:0}},computed:{vertical:function(){var t=this.rootWidth,e=this.rootHeight,i=e/t;return this.imageRatio>i},imageStyle:function(){var t=this.scale,e={transitionDuration:this.zooming||this.moving?"0s":".3s"};if(1!==t){var i=this.moveX/t,n=this.moveY/t;e.transform="scale("+t+", "+t+") translate("+i+"px, "+n+"px)"}return e},maxMoveX:function(){if(this.imageRatio){var t=this.vertical?this.rootHeight/this.imageRatio:this.rootWidth;return Math.max(0,(this.scale*t-this.rootWidth)/2)}return 0},maxMoveY:function(){if(this.imageRatio){var t=this.vertical?this.rootHeight:this.rootWidth*this.imageRatio;return Math.max(0,(this.scale*t-this.rootHeight)/2)}return 0}},watch:{active:"resetScale",show:function(t){t||this.resetScale()}},mounted:function(){this.bindTouchEvent(this.$el)},methods:{resetScale:function(){this.setScale(1),this.moveX=0,this.moveY=0},setScale:function(t){t=(0,$.w6)(t,+this.minZoom,+this.maxZoom),t!==this.scale&&(this.scale=t,this.$emit("scale",{scale:this.scale,index:this.active}))},toggleScale:function(){var t=this.scale>1?1:2;this.setScale(t),this.moveX=0,this.moveY=0},onTouchStart:function(t){var e=t.touches,i=this.offsetX,n=void 0===i?0:i;this.touchStart(t),this.touchStartTime=new Date,this.fingerNum=e.length,this.startMoveX=this.moveX,this.startMoveY=this.moveY,this.moving=1===this.fingerNum&&1!==this.scale,this.zooming=2===this.fingerNum&&!n,this.zooming&&(this.startScale=this.scale,this.startDistance=E(t.touches))},onTouchMove:function(t){var e=t.touches;if(this.touchMove(t),(this.moving||this.zooming)&&(0,P.PF)(t,!0),this.moving){var i=this.deltaX+this.startMoveX,n=this.deltaY+this.startMoveY;this.moveX=(0,$.w6)(i,-this.maxMoveX,this.maxMoveX),this.moveY=(0,$.w6)(n,-this.maxMoveY,this.maxMoveY)}if(this.zooming&&2===e.length){var s=E(e),o=this.startScale*s/this.startDistance;this.setScale(o)}},onTouchEnd:function(t){var e=!1;(this.moving||this.zooming)&&(e=!0,this.moving&&this.startMoveX===this.moveX&&this.startMoveY===this.moveY&&(e=!1),t.touches.length||(this.zooming&&(this.moveX=(0,$.w6)(this.moveX,-this.maxMoveX,this.maxMoveX),this.moveY=(0,$.w6)(this.moveY,-this.maxMoveY,this.maxMoveY),this.zooming=!1),this.moving=!1,this.startMoveX=0,this.startMoveY=0,this.startScale=1,this.scale<1&&this.resetScale())),(0,P.PF)(t,e),this.checkTap(),this.resetTouchStatus()},checkTap:function(){var t=this;if(!(this.fingerNum>1)){var e=this.offsetX,i=void 0===e?0:e,n=this.offsetY,s=void 0===n?0:n,o=new Date-this.touchStartTime,a=250,r=5;i<r&&s<r&&o<a&&(this.doubleTapTimer?(clearTimeout(this.doubleTapTimer),this.doubleTapTimer=null,this.toggleScale()):this.doubleTapTimer=setTimeout((function(){t.$emit("close"),t.doubleTapTimer=null}),a))}},onLoad:function(t){var e=t.target,i=e.naturalWidth,n=e.naturalHeight;this.imageRatio=n/i}},render:function(){var t=arguments[0],e={loading:function(){return t(y.Z,{attrs:{type:"spinner"}})}};return t(z,{class:C("swipe-item")},[t(g.Z,{attrs:{src:this.src,fit:"contain"},class:C("image",{vertical:this.vertical}),style:this.imageStyle,scopedSlots:e,on:{load:this.onLoad}})])}},F=k({mixins:[_.D,(0,x.e)({skipToggleEvent:!0}),(0,S.X)((function(t){t(window,"resize",this.resize,!0),t(window,"orientationchange",this.resize,!0)}))],props:{className:null,closeable:Boolean,asyncClose:Boolean,overlayStyle:Object,showIndicators:Boolean,images:{type:Array,default:function(){return[]}},loop:{type:Boolean,default:!0},overlay:{type:Boolean,default:!0},minZoom:{type:[Number,String],default:1/3},maxZoom:{type:[Number,String],default:3},transition:{type:String,default:"van-fade"},showIndex:{type:Boolean,default:!0},swipeDuration:{type:[Number,String],default:300},startPosition:{type:[Number,String],default:0},overlayClass:{type:String,default:C("overlay")},closeIcon:{type:String,default:"clear"},closeOnPopstate:{type:Boolean,default:!0},closeIconPosition:{type:String,default:"top-right"}},data:function(){return{active:0,rootWidth:0,rootHeight:0,doubleClickTimer:null}},mounted:function(){this.resize()},watch:{startPosition:"setActive",value:function(t){var e=this;t?(this.setActive(+this.startPosition),this.$nextTick((function(){e.resize(),e.$refs.swipe.swipeTo(+e.startPosition,{immediate:!0})}))):this.$emit("close",{index:this.active,url:this.images[this.active]})}},methods:{resize:function(){if(this.$el&&this.$el.getBoundingClientRect){var t=this.$el.getBoundingClientRect();this.rootWidth=t.width,this.rootHeight=t.height}},emitClose:function(){this.asyncClose||this.$emit("input",!1)},emitScale:function(t){this.$emit("scale",t)},setActive:function(t){t!==this.active&&(this.active=t,this.$emit("change",t))},genIndex:function(){var t=this.$createElement;if(this.showIndex)return t("div",{class:C("index")},[this.slots("index",{index:this.active})||this.active+1+" / "+this.images.length])},genCover:function(){var t=this.$createElement,e=this.slots("cover");if(e)return t("div",{class:C("cover")},[e])},genImages:function(){var t=this,e=this.$createElement;return e(A,{ref:"swipe",attrs:{lazyRender:!0,loop:this.loop,duration:this.swipeDuration,initialSwipe:this.startPosition,showIndicators:this.showIndicators,indicatorColor:"white"},class:C("swipe"),on:{change:this.setActive}},[this.images.map((function(i){return e(Y,{attrs:{src:i,show:t.value,active:t.active,maxZoom:t.maxZoom,minZoom:t.minZoom,rootWidth:t.rootWidth,rootHeight:t.rootHeight},on:{scale:t.emitScale,close:t.emitClose}})}))])},genClose:function(){var t=this.$createElement;if(this.closeable)return t(v.Z,{attrs:{role:"button",name:this.closeIcon},class:C("close-icon",this.closeIconPosition),on:{click:this.emitClose}})},onClosed:function(){this.$emit("closed")},swipeTo:function(t,e){this.$refs.swipe&&this.$refs.swipe.swipeTo(t,e)}},render:function(){var t=arguments[0];return t("transition",{attrs:{name:this.transition},on:{afterLeave:this.onClosed}},[this.shouldRender?t("div",{directives:[{name:"show",value:this.value}],class:[C(),this.className]},[this.genClose(),this.genImages(),this.genIndex(),this.genCover()]):null])}}),H={loop:!0,value:!0,images:[],maxZoom:3,minZoom:1/3,onClose:null,onChange:null,className:"",showIndex:!0,closeable:!1,closeIcon:"clear",asyncClose:!1,transition:"van-fade",getContainer:"body",overlayStyle:null,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeIconPosition:"top-right"},R=function(){M=new(b.ZP.extend(F))({el:document.createElement("div")}),document.body.appendChild(M.$el),M.$on("change",(function(t){M.onChange&&M.onChange(t)})),M.$on("scale",(function(t){M.onScale&&M.onScale(t)}))},j=function(t,e){if(void 0===e&&(e=0),!a.sk){M||R();var i=Array.isArray(t)?{images:t,startPosition:e}:t;return(0,o.Z)(M,H,i),M.$once("input",(function(t){M.value=t})),M.$once("closed",(function(){M.images=[]})),i.onClose&&(M.$off("close"),M.$once("close",i.onClose)),M}};j.Component=F,j.install=function(){b.ZP.use(F)};var W=j,q=(0,r.d)("uploader"),Q=q[0],X=q[1],U=Q({inheritAttrs:!1,mixins:[p],model:{prop:"fileList"},props:{disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,uploadText:String,afterRead:Function,beforeRead:Function,beforeDelete:Function,previewSize:[Number,String],previewOptions:Object,name:{type:[Number,String],default:""},accept:{type:String,default:"image/*"},fileList:{type:Array,default:function(){return[]}},maxSize:{type:[Number,String,Function],default:Number.MAX_VALUE},maxCount:{type:[Number,String],default:Number.MAX_VALUE},deletable:{type:Boolean,default:!0},showUpload:{type:Boolean,default:!0},previewImage:{type:Boolean,default:!0},previewFullImage:{type:Boolean,default:!0},imageFit:{type:String,default:"cover"},resultType:{type:String,default:"dataUrl"},uploadIcon:{type:String,default:"photograph"}},computed:{previewSizeWithUnit:function(){return(0,l.N)(this.previewSize)},value:function(){return this.fileList}},created:function(){this.urls=[]},beforeDestroy:function(){this.urls.forEach((function(t){return URL.revokeObjectURL(t)}))},methods:{getDetail:function(t){return void 0===t&&(t=this.fileList.length),{name:this.name,index:t}},onChange:function(t){var e=this,i=t.target.files;if(!this.disabled&&i.length){if(i=1===i.length?i[0]:[].slice.call(i),this.beforeRead){var n=this.beforeRead(i,this.getDetail());if(!n)return void this.resetInput();if((0,a.tI)(n))return void n.then((function(t){t?e.readFile(t):e.readFile(i)})).catch(this.resetInput)}this.readFile(i)}},readFile:function(t){var e=this,i=h(t,this.maxSize);if(Array.isArray(t)){var n=this.maxCount-this.fileList.length;t.length>n&&(t=t.slice(0,n)),Promise.all(t.map((function(t){return u(t,e.resultType)}))).then((function(n){var s=t.map((function(t,e){var i={file:t,status:"",message:""};return n[e]&&(i.content=n[e]),i}));e.onAfterRead(s,i)}))}else u(t,this.resultType).then((function(n){var s={file:t,status:"",message:""};n&&(s.content=n),e.onAfterRead(s,i)}))},onAfterRead:function(t,e){var i=this;this.resetInput();var n=t;if(e){var s=t;Array.isArray(t)?(s=[],n=[],t.forEach((function(t){t.file&&(h(t.file,i.maxSize)?s.push(t):n.push(t))}))):n=null,this.$emit("oversize",s,this.getDetail())}var o=Array.isArray(n)?Boolean(n.length):Boolean(n);o&&(this.$emit("input",[].concat(this.fileList,c(n))),this.afterRead&&this.afterRead(n,this.getDetail()))},onDelete:function(t,e){var i,n=this,s=null!=(i=t.beforeDelete)?i:this.beforeDelete;if(s){var o=s(t,this.getDetail(e));if(!o)return;if((0,a.tI)(o))return void o.then((function(){n.deleteFile(t,e)})).catch(a.ZT)}this.deleteFile(t,e)},deleteFile:function(t,e){var i=this.fileList.slice(0);i.splice(e,1),this.$emit("input",i),this.$emit("delete",t,this.getDetail(e))},resetInput:function(){this.$refs.input&&(this.$refs.input.value="")},onClickUpload:function(t){this.$emit("click-upload",t)},onPreviewImage:function(t){var e=this;if(this.previewFullImage){var i=this.fileList.filter((function(t){return m(t)})),n=i.map((function(t){return t.file&&!t.url&&(t.url=URL.createObjectURL(t.file),e.urls.push(t.url)),t.url}));this.imagePreview=W((0,o.Z)({images:n,startPosition:i.indexOf(t),onClose:function(){e.$emit("close-preview")}},this.previewOptions))}},closeImagePreview:function(){this.imagePreview&&this.imagePreview.close()},chooseFile:function(){this.disabled||this.$refs.input&&this.$refs.input.click()},genPreviewMask:function(t){var e=this.$createElement,i=t.status,n=t.message;if("uploading"===i||"failed"===i){var s="failed"===i?e(v.Z,{attrs:{name:"close"},class:X("mask-icon")}):e(y.Z,{class:X("loading")}),o=(0,a.Xq)(n)&&""!==n;return e("div",{class:X("mask")},[s,o&&e("div",{class:X("mask-message")},[n])])}},genPreviewItem:function(t,e){var i,n,s,a=this,r=this.$createElement,l=null!=(i=t.deletable)?i:this.deletable,c="uploading"!==t.status&&l,u=c&&r("div",{class:X("preview-delete"),on:{click:function(i){i.stopPropagation(),a.onDelete(t,e)}}},[r(v.Z,{attrs:{name:"cross"},class:X("preview-delete-icon")})]),h=this.slots("preview-cover",(0,o.Z)({index:e},t)),d=h&&r("div",{class:X("preview-cover")},[h]),f=null!=(n=t.previewSize)?n:this.previewSize,p=null!=(s=t.imageFit)?s:this.imageFit,y=m(t)?r(g.Z,{attrs:{fit:p,src:t.content||t.url,width:f,height:f,lazyLoad:this.lazyLoad},class:X("preview-image"),on:{click:function(){a.onPreviewImage(t)}}},[d]):r("div",{class:X("file"),style:{width:this.previewSizeWithUnit,height:this.previewSizeWithUnit}},[r(v.Z,{class:X("file-icon"),attrs:{name:"description"}}),r("div",{class:[X("file-name"),"van-ellipsis"]},[t.file?t.file.name:t.url]),d]);return r("div",{class:X("preview"),on:{click:function(){a.$emit("click-preview",t,a.getDetail(e))}}},[y,this.genPreviewMask(t),u])},genPreviewList:function(){if(this.previewImage)return this.fileList.map(this.genPreviewItem)},genUpload:function(){var t=this.$createElement;if(!(this.fileList.length>=this.maxCount)&&this.showUpload){var e,i=this.slots(),n=this.readonly?null:t("input",{attrs:(0,o.Z)({},this.$attrs,{type:"file",accept:this.accept,disabled:this.disabled}),ref:"input",class:X("input"),on:{change:this.onChange}});if(i)return t("div",{class:X("input-wrapper"),key:"input-wrapper",on:{click:this.onClickUpload}},[i,n]);if(this.previewSize){var s=this.previewSizeWithUnit;e={width:s,height:s}}return t("div",{class:X("upload",{readonly:this.readonly}),style:e,on:{click:this.onClickUpload}},[t(v.Z,{attrs:{name:this.uploadIcon},class:X("upload-icon")}),this.uploadText&&t("span",{class:X("upload-text")},[this.uploadText]),n])}}},render:function(){var t=arguments[0];return t("div",{class:X()},[t("div",{class:X("wrapper",{disabled:this.disabled})},[this.genPreviewList(),this.genUpload()])])}}),K=(i(3891),i(6811)),G=(i(9293),i(7722)),J=(i(1611),i(7061)),tt=(i(3970),i(140)),et=i(7565),it=i(5390),nt=i(3822),st={name:"publish",components:{BomViem:et.Z,[tt.Z.name]:tt.Z,[J.Z.name]:J.Z,[G.Z.name]:G.Z,[K.Z.name]:K.Z,[U.name]:U},data(){return{title:"",content:"",cate_id:"",cate_name:"",catePickerShow:!1,fileList:[]}},computed:{...(0,nt.rn)(["cate","uid","userInfo"])},created(){this.$store.dispatch("getCate")},methods:{...(0,nt.nv)(["upload"]),onConfirm(t){this.catePickerShow=!1,this.cate_name=t.name,this.cate_id=t._id},async onSubmit(t){let{cate_id:e,uid:i,userInfo:n,fileList:s}=this,{nickname:o}=n;if(!i)return this.$toast("请先登录"),void setTimeout((t=>{this.$router.push("/login")}),500);let a=await this.upload(s);console.log(a),delete t.fileList,(0,it.qM)({...t,cate_id:e,author:o,author_id:i,imageSrc:a}).then((t=>{console.log(t),this.$toast(t.msg)}))}}},ot=st,at=i(1001),rt=(0,at.Z)(ot,n,s,!1,null,"7b93a9b4",null),lt=rt.exports},5619:function(t,e,i){i.r(e),i.d(e,{default:function(){return f}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"forget"},[e("van-nav-bar",{attrs:{"left-text":"返回","left-arrow":""},on:{"click-left":t.go},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"nav-login"},[t._v("忘记密码")])]},proxy:!0}])}),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"手机号",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e("van-field",{attrs:{name:"验证码",type:"number",center:"",clearable:"",label:"短信验证码",placeholder:"请输入短信验证码"},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-button",{attrs:{size:"small",type:"primary","native-type":"button"},on:{click:t.aa}},[t._v("发送验证码")])]},proxy:!0}]),model:{value:t.vercode,callback:function(e){t.vercode=e},expression:"vercode"}}),e("van-field",{attrs:{type:"password",name:"密码",label:"密码",placeholder:"密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1)},s=[],o=(i(1611),i(7061)),a=(i(3970),i(140)),r=i(6369),l=i(8606);r.ZP.use(a.Z),r.ZP.use(o.Z);var c={data(){return{username:"",password:"",vercode:""}},methods:{go(){this.$router.go(-1)},aa(){(0,l.RD)({mobile:this.username,type:"login"}).then((t=>{})).catch((t=>{}))},onSubmit(t){console.log("submit",t),(0,l.FY)({username:this.username,password:this.password,vercode:this.vercode}).then((t=>{console.log(t),0==t.code?(this.$toast.fail(t.msg),setTimeout((()=>{this.$router.push("/login")}),1e3)):this.$toast.fail(t.msg)})).catch((t=>{}))}}},u=c,h=i(1001),d=(0,h.Z)(u,n,s,!1,null,"35b684a9",null),f=d.exports},7637:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"history"},[e("van-nav-bar",{attrs:{title:"历史记录","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),e("div",{staticClass:"box",staticStyle:{"padding-bottom":"50px"}},[e("ul",[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onload},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.lists,(function(i,n){return e("li",{key:n,staticClass:"box",on:{click:function(e){return t.$router.push({path:"/artice",query:{article_id:i._id,title:i.title}})}}},[e("div",{staticClass:"info"},[1==i.imageSrc.length||2==i.imageSrc.length||3==i.imageSrc.length?e("div",{staticClass:"imgs",class:{one:1==i.imageSrc.length,two:2==i.imageSrc.length,three:3==i.imageSrc.length}},[e("h3",[t._v(" "+t._s(i.title)+" ")]),e("div",{staticClass:"lr"},t._l(i.imageSrc,(function(t,i){return e("img",{key:i,attrs:{src:t,alt:""}})})),0)]):t._e(),e("div",{staticClass:"bb"},[e("span",[t._v(" 发布人"+t._s(i.author)+" ")]),e("span",[t._v(" 时间 "+t._s(t._f("formatDate")(i.time))+" ")])])])])})),0)],1)])],1)},s=[],o=i(2419),a=i(3822),r={data(){return{lists:[],loading:!1,finished:!1,skip:"",limit:10}},computed:{...(0,a.rn)(["uid"])},mounted(){},methods:{onload(){let{uid:t,skip:e,limit:i}=this;(0,o.vq)({skip:e,uid:t,limit:i}).then((t=>{this.lists.push(...t.data);let e=this.lists.length;e>=t.count?this.finished=!0:(this.skip=e,this.loading=!1)}))}},filters:{formatDate:function(t){if(null==t)return"";{let e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;let s=e.getDate();return s=s<10?"0"+s:s,i+"-"+n+"-"+s}}}},l=r,c=i(1001),u=(0,c.Z)(l,n,s,!1,null,"2b9ccc1d",null),h=u.exports},9399:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"myfabu"},[e("van-nav-bar",{attrs:{title:"我的发布","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),e("div",{staticClass:"box",staticStyle:{"padding-bottom":"50px"}},[e("ul",[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onload},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.lists,(function(i,n){return e("li",{key:n,staticClass:"box",on:{click:function(e){return t.$router.push({path:"/artice",query:{article_id:i._id,title:i.title}})}}},[e("div",{staticClass:"info"},[1==i.imageSrc.length?e("div",{staticClass:"imgs",class:{one:1==i.imageSrc.length,two:2==i.imageSrc.length,three:3==i.imageSrc.length}},[e("h3",[t._v(" "+t._s(i.title)+" ")]),e("div",{staticClass:"lr"},t._l(i.imageSrc,(function(t,i){return e("img",{key:i,attrs:{src:t,alt:""}})})),0)]):2==i.imageSrc.length?e("div",{staticClass:"imgs",class:{one:1==i.imageSrc.length,two:2==i.imageSrc.length,three:3==i.imageSrc.length}},[e("div",{staticClass:"lr"},[e("h3",[t._v(" "+t._s(i.title)+" ")]),t._l(i.imageSrc,(function(t,i){return e("img",{key:i,attrs:{src:t,alt:""}})}))],2)]):3==i.imageSrc.length?e("div",{staticClass:"imgs",class:{one:1==i.imageSrc.length,two:2==i.imageSrc.length,three:3==i.imageSrc.length}},[e("h3",[t._v(" "+t._s(i.title)+" ")]),e("div",{staticClass:"lr"},t._l(i.imageSrc,(function(t,i){return e("img",{key:i,attrs:{src:t,alt:""}})})),0)]):t._e(),e("div",{staticClass:"bb"},[e("span",[t._v(" 发布人"+t._s(i.author)+" ")]),e("span",[t._v(" 时间 "+t._s(t._f("formatDate")(i.time))+" ")]),e("span",{on:{click:function(e){return e.stopPropagation(),t.del(n)}}},[t._v("删除文章")])])])])})),0)],1)])],1)},s=[],o=i(2419),a=i(3822),r={data(){return{lists:[],loading:!1,finished:!1,skip:"",limit:10}},computed:{...(0,a.rn)(["uid"])},mounted(){},methods:{del(t){console.log(t);let{uid:e}=this,i=this.lists[t]._id;(0,o.$6)({uid:e,_id:i}).then((e=>{console.log(e),this.lists.splice(t,1)})).catch((t=>{}))},onload(){let{uid:t,skip:e,limit:i}=this;(0,o.nX)({skip:e,uid:t,limit:i}).then((t=>{this.lists.push(...t.data);let e=this.lists.length;e>=t.count?this.finished=!0:(this.skip=e,this.loading=!1)}))}},filters:{formatDate:function(t){if(null==t)return"";{let e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;let s=e.getDate();return s=s<10?"0"+s:s,i+"-"+n+"-"+s}}}},l=r,c=i(1001),u=(0,c.Z)(l,n,s,!1,null,"c8c47918",null),h=u.exports},7246:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mima"},[e("van-nav-bar",{attrs:{"left-text":"返回","left-arrow":""},on:{"click-left":t.go},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"nav-login"},[t._v("修改密码")])]},proxy:!0}])}),e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{type:"password",name:"原密码",label:"原密码",placeholder:"原密码",rules:[{required:!0,message:"请填写原密码"}]},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}}),e("van-field",{attrs:{type:"password",name:"新密码",label:"新密码",placeholder:"新密码",rules:[{required:!0,message:"请填写新密码"}]},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),e("div",{staticClass:"mima_r"},[e("router-link",{attrs:{to:"/forget"}},[t._v("忘记密码")])],1),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1)},s=[],o=(i(1611),i(7061)),a=(i(3970),i(140)),r=(i(4920),i(8848)),l=i(6369),c=i(8606);l.ZP.use(r.Z),l.ZP.use(a.Z),l.ZP.use(o.Z);var u={data(){return{oldPassword:"",newPassword:"",uid:""}},watch:{"$store.state.uid":{immediate:!0,handler(t,e){this.uid=t}}},methods:{go(){this.$router.go(-1)},onSubmit(t){(0,c.qr)({oldPassword:this.oldPassword,newPassword:this.newPassword,uid:this.uid}).then((t=>{console.log(t),0==t.code?(this.$toast(t.msg),setTimeout((()=>{this.$router.push("/login")}),1e3)):this.$toast(t.msg)})).catch((t=>{}))}}},h=u,d=i(1001),f=(0,d.Z)(h,n,s,!1,null,"73e14052",null),m=f.exports},9033:function(t,e,i){i.r(e),i.d(e,{default:function(){return u}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reg"},[e("van-nav-bar",{attrs:{title:"注册","left-arrow":""},on:{"click-left":t.onClickLeft}}),e("van-form",{ref:"regForm",on:{submit:t.onSubmit}},[e("van-field",{attrs:{name:"username",label:"手机号",placeholder:"请输入手机号",rules:[{required:!0,message:"请填写手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e("van-field",{attrs:{name:"vercode",rules:[{required:!0,message:"请填写验证码"},{pattern:/^\d{6}/,message:"验证码格式错误"}],center:"",clearable:"",label:"短信验证码",placeholder:"请输入短信验证码"},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-button",{attrs:{size:"small",loading:t.codeBtnLoading,"loading-type":"circular","native-type":"button","loading-text":t.code_text,disabled:t.codeBtnDisabled,type:"primary"},on:{click:t.sendSms}},[t._v(t._s(t.code_text))])]},proxy:!0}]),model:{value:t.vercode,callback:function(e){t.vercode=e},expression:"vercode"}}),e("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"},{validator:t=>/^\w{6,12}$/.test(t),message:"密码格式错误"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1)},s=[],o=i(2419),a={data(){return{username:"",password:"",vercode:"",codeBtnDisabled:!1,code_text:"发送验证码",codeBtnLoading:!1}},methods:{onClickLeft(){this.$router.go(-1)},onSubmit(t){(0,o.YD)(t).then((t=>{console.log(t),this.$router.push("/login")})).catch((t=>{}))},async sendSms(){await this.$refs.regForm.validate("username");this.codeBtnDisabled=!0,this.code_text="发送中...",this.codeBtnLoading=!0,(0,o.Q6)({mobile:this.username,type:"register"}).then((t=>{if(console.log(t),0==t.code){this.$toast(`短信已经发送到手机号${this.username},请注意查收`);let t=10,e=setInterval((()=>{t--,this.code_text=`${t}s后再次获取`,0==t&&(clearInterval(e),this.codeBtnDisabled=!1,this.code_text="再次发送",this.codeBtnLoading=!1,t=10)}),1e3)}else this.$toast(t.msg||"发送失败"),this.codeBtnDisabled=!1,this.code_text="再次发送",this.codeBtnLoading=!1})).catch((t=>{this.$toast(t.msg||"发送失败"),this.codeBtnDisabled=!1,this.code_text="再次发送",this.codeBtnLoading=!1}))}}},r=a,l=i(1001),c=(0,l.Z)(r,n,s,!1,null,null,null),u=c.exports},2132:function(t,e,i){i.r(e),i.d(e,{default:function(){return d}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"list"},[e("van-nav-bar",{attrs:{fixed:"",title:"搜索列表页","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),e("div",{staticClass:"box",staticStyle:{"padding-bottom":"50px"}},[e("ul",[e("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isRefresh,callback:function(e){t.isRefresh=e},expression:"isRefresh"}},[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.getList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(i,n){return e("li",{key:n,staticClass:"box",on:{click:function(e){return t.$router.push({path:"/artice",query:{article_id:i._id,title:i.title}})}}},[i.imageSrc.length>=2?e("div",{staticClass:"info"},[e("h3",[t._v(" "+t._s(i.title)+" ")]),e("div",{staticClass:"imgs",class:{one:1==i.imageSrc.length,two:2==i.imageSrc.length,three:3==i.imageSrc.length}},t._l(i.imageSrc,(function(t,i){return e("img",{key:i,attrs:{src:t,alt:""}})})),0),e("div",{staticClass:"bb"},[e("span",[t._v(" 发布人"+t._s(i.author)+" ")]),e("span",[t._v(" 时间 "+t._s(t._f("formatDate")(i.time))+" ")])])]):e("div",{staticClass:"info"},[e("div",{staticClass:"imgs",class:{one:1==i.imageSrc.length,two:2==i.imageSrc.length,three:3==i.imageSrc.length}},[e("h3",[t._v(" "+t._s(i.title)+" ")]),t._l(i.imageSrc,(function(t,i){return e("img",{key:i,attrs:{src:t,alt:""}})}))],2),e("div",{staticClass:"bb"},[e("span",[t._v(" 发布人"+t._s(i.author)+" ")]),e("span",[t._v(" 时间 "+t._s(t._f("formatDate")(i.time))+" ")])])])])})),0)],1)],1)])],1)},s=[],o=(i(7037),i(4319)),a=(i(7983),i(4269)),r=i(2419),l={data(){return{loading:!1,finished:!1,skip:0,limit:10,isRefresh:!1,list:[],key_word:""}},filters:{formatDate:function(t){if(null==t)return"";{let e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;let s=e.getDate();return s=s<10?"0"+s:s,i+"-"+n+"-"+s}}},created(){this.key_word=this.$route.query.key_word},components:{[a.Z.name]:a.Z,[o.Z.name]:o.Z},methods:{getList(t){let{key_word:e,limit:i,skip:n}=this;(0,r.yC)({key_word:e,limit:i,skip:n}).then((e=>{if(0==e.code){t?(this.list=e.data,this.isRefresh=!1):this.list.push(...e.data);let i=this.list.length;i>=e.count?this.finished=!0:(this.loading=!1,this.skip=i)}})).catch((t=>{}))},onRefresh(){this.skip=0,this.finished=!1,this.getList(!0)}}},c=l,u=i(1001),h=(0,u.Z)(c,n,s,!1,null,"fab0fe24",null),d=h.exports},8518:function(t,e,i){i.r(e),i.d(e,{default:function(){return h}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-container"},[e("van-search",{attrs:{placeholder:t.hork,"show-action":""},on:{search:t.onSearch,input:t.oninput,cancel:function(e){return t.$router.back()}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.searchList.length,expression:"searchList.length"}],staticClass:"con"},t._l(t.searchList,(function(i,n){return e("van-cell",{key:n,attrs:{title:i.title},on:{click:function(e){return t.searchListTab(i.title)}}})})),1),e("div",{staticClass:"search-history"},[e("van-cell",{attrs:{title:"搜索历史"}},[e("div",[e("span",{on:{click:t.delall}},[t._v("全部删除")])])]),t._l(t.history,(function(i,n){return e("van-cell",{key:n,attrs:{title:i,to:{path:"/seachList",query:{key_word:i}}}},[e("van-icon",{attrs:{size:"26",name:"close"},on:{click:function(e){return t.delone(n)}}})],1)}))],2)],1)},s=[],o=i(2419);function a(t,e=500){let i=null;return function(...n){clearTimeout(i),i=setTimeout((e=>{t.apply(this,n)}),e)}}var r={data(){return{value:"",hork:"11",searchList:[],history:[]}},watch:{value(t){0==t.trim().length&&(this.searchList=[])}},created(){let t=localStorage.getItem("history");t&&(this.history=JSON.parse(t))},methods:{delall(){this.history=[],localStorage.setItem("history",JSON.stringify(this.history))},delone(t){this.history.splice(t,1),localStorage.setItem("history",JSON.stringify(this.history))},searchListTab(t){let e=this.history.findIndex((e=>e==t));e>=0&&this.history.splice(e,1),this.history.unshift(t),localStorage.setItem("history",JSON.stringify(this.history)),this.$router.push({path:"/seachList",query:{key_word:t}})},oninput:a((function(t){t=t.trim(),0!=t.length&&(0,o.yC)({key_word:t}).then((t=>{console.log(t),this.searchList=t.data}))})),onSearch(t){t=t.trim(),t=t||this.hork,this.searchListTab(t),console.log(t)}}},l=r,c=i(1001),u=(0,c.Z)(l,n,s,!1,null,"370591d3",null),h=u.exports},2388:function(t,e,i){i.r(e),i.d(e,{default:function(){return c}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"study"},[e("span",{staticClass:"iconfont icon-gougouchushou"}),e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":"#icon-gougouchushou"}})]),e("van-button",{attrs:{color:t.basegreen}},[t._v("单色按钮")])],1)},s=[],o={},a=o,r=i(1001),l=(0,r.Z)(a,n,s,!1,null,null,null),c=l.exports},4117:function(t,e,i){i.r(e),i.d(e,{default:function(){return B}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"user"},[t.isLogin?e("div",{staticClass:"user_t"},[e("div",{staticClass:"ll"},[e("div",{staticClass:"use_l"},[e("img",{attrs:{src:t.userInfo.avatar,alt:""}}),e("span",[t._v(" "+t._s(t.userInfo.nickname)+" ")])]),e("div",{staticClass:"use_r"},[e("router-link",{staticClass:"home-header-serch",attrs:{to:"/edit"}},[t._v("编辑资料")])],1)]),e("div",{staticClass:"use_b"},[e("div",{staticClass:"use_b_l"},[e("span",[t._v(t._s(t.publish_num))]),e("span",[t._v("头条")])]),e("div",{staticClass:"use_b_r"},[e("span",[t._v(t._s(t.liked_num))]),e("span",[t._v("获赞")])])])]):e("div",{staticClass:"not-login"},[t._m(0),e("div",{staticClass:"text"},[e("span",{on:{click:t.loginzi}},[t._v("登录")]),t._v(" / "),e("span",{on:{click:t.regzi}},[t._v("注册")])])]),e("div",{staticClass:"grid"},[e("van-grid",{attrs:{clickable:"","column-num":2}},[e("van-grid-item",{attrs:{to:"/collection"}},[e("van-icon",{attrs:{name:"star-o",size:"20",color:"#f27f98"}}),t._v("收藏")],1),e("van-grid-item",{attrs:{to:"/history"}},[e("van-icon",{attrs:{size:"20",color:"#f27f98",name:"underway-o"}}),t._v("历史")],1)],1)],1),e("div",{staticClass:"cell"},[e("van-cell",{attrs:{title:"我的发布",to:"/myfabu","is-link":""}}),e("van-cell",{staticClass:"cell",attrs:{title:"修改密码","is-link":""},on:{click:t.tiao}}),e("van-cell",{attrs:{title:"联系我们","is-link":""}}),e("van-cell",{attrs:{title:"关于我们","is-link":""}})],1),t.isLogin?e("van-button",{attrs:{type:"primary",block:""},on:{click:t.out}},[t._v("退出登录")]):t._e(),e("BomViem")],1)},s=[function(){var t=this,e=t._self._c;return e("div",[e("img",{staticClass:"mobile",attrs:{src:i(3550)}})])}],o=(i(8618),i(5705)),a=(i(5623),i(4933),i(3671),i(9299)),r=i(855),l=i(408),c=i(1047),u=i(2250),h=i(2115),d=i(812),f=i(9858),m=(0,r.d)("grid-item"),p=m[0],v=m[1],g=p({mixins:[(0,h.j)("vanGrid")],props:(0,a.Z)({},u.g2,{dot:Boolean,text:String,icon:String,iconPrefix:String,info:[Number,String],badge:[Number,String]}),computed:{style:function(){var t=this.parent,e=t.square,i=t.gutter,n=t.columnNum,s=100/n+"%",o={flexBasis:s};if(e)o.paddingTop=s;else if(i){var a=(0,l.N)(i);o.paddingRight=a,this.index>=n&&(o.marginTop=a)}return o},contentStyle:function(){var t=this.parent,e=t.square,i=t.gutter;if(e&&i){var n=(0,l.N)(i);return{right:n,bottom:n,height:"auto"}}}},methods:{onClick:function(t){this.$emit("click",t),(0,u.BC)(this.$router,this)},genIcon:function(){var t,e=this.$createElement,i=this.slots("icon"),n=null!=(t=this.badge)?t:this.info;return i?e("div",{class:v("icon-wrapper")},[i,e(d.Z,{attrs:{dot:this.dot,info:n}})]):this.icon?e(f.Z,{attrs:{name:this.icon,dot:this.dot,badge:n,size:this.parent.iconSize,classPrefix:this.iconPrefix},class:v("icon")}):void 0},getText:function(){var t=this.$createElement,e=this.slots("text");return e||(this.text?t("span",{class:v("text")},[this.text]):void 0)},genContent:function(){var t=this.slots();return t||[this.genIcon(),this.getText()]}},render:function(){var t,e=arguments[0],i=this.parent,n=i.center,s=i.border,o=i.square,a=i.gutter,r=i.direction,l=i.clickable;return e("div",{class:[v({square:o})],style:this.style},[e("div",{style:this.contentStyle,attrs:{role:l?"button":null,tabindex:l?0:null},class:[v("content",[r,{center:n,square:o,clickable:l,surround:s&&a}]),(t={},t[c.T5]=s,t)],on:{click:this.onClick}},[this.genContent()])])}}),y=(0,r.d)("grid"),b=y[0],w=y[1],k=b({mixins:[(0,h.G)("vanGrid")],props:{square:Boolean,gutter:[Number,String],iconSize:[Number,String],direction:String,clickable:Boolean,columnNum:{type:[Number,String],default:4},center:{type:Boolean,default:!0},border:{type:Boolean,default:!0}},computed:{style:function(){var t=this.gutter;if(t)return{paddingLeft:(0,l.N)(t)}}},render:function(){var t,e=arguments[0];return e("div",{style:this.style,class:[w(),(t={},t[c.k7]=this.border&&!this.gutter,t)]},[this.slots()])}}),C=(i(4809),i(2406),i(9864)),x=(i(9578),i(6631)),_=i(7565),S=i(3822),I=i(6369);I.ZP.use(x.Z),I.ZP.use(C.Z),I.ZP.use(f.Z),I.ZP.use(k),I.ZP.use(g);var P={name:"user",computed:{aa(){return this.$store.state.uid},...(0,S.rn)(["uid","token","isLogin","userInfo","publish_num","liked_num"])},data(){return{}},methods:{out(){o.Z.confirm({title:"提示",message:"您确定退出登录嘛"}).then((()=>{this.remove(),localStorage.clear()})).catch((()=>{}))},remove(){this.$store.commit("clear")},loginzi(){this.$router.push("/login")},regzi(){this.$router.push("/reg")},tiao(){this.$router.push("/change")}},components:{BomViem:_.Z,[k.name]:k,[g.name]:g,[f.Z.name]:f.Z,[x.Z.name]:x.Z,[C.Z.anme]:C.Z,[o.Z.Component.name]:o.Z.Component}},T=P,$=i(1001),Z=(0,$.Z)(T,n,s,!1,null,"06e31f39",null),B=Z.exports},43:function(){},5941:function(){},5705:function(t,e,i){i.d(e,{Z:function(){return D}});var n,s=i(9299),o=i(6369),a=i(3915),r=i.n(a),l=i(3370),c=i(855),u=i(408),h=i(1047),d=i(7846),f=i(4398),m=i(2115),p=(0,c.d)("goods-action"),v=p[0],g=p[1],y=v({mixins:[(0,m.G)("vanGoodsAction")],props:{safeAreaInsetBottom:{type:Boolean,default:!0}},render:function(){var t=arguments[0];return t("div",{class:g({unfit:!this.safeAreaInsetBottom})},[this.slots()])}}),b=i(2250),w=(0,c.d)("goods-action-button"),k=w[0],C=w[1],x=k({mixins:[(0,m.j)("vanGoodsAction")],props:(0,s.Z)({},b.g2,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean}),computed:{isFirst:function(){var t=this.parent&&this.parent.children[this.index-1];return!t||t.$options.name!==this.$options.name},isLast:function(){var t=this.parent&&this.parent.children[this.index+1];return!t||t.$options.name!==this.$options.name}},methods:{onClick:function(t){this.$emit("click",t),(0,b.BC)(this.$router,this)}},render:function(){var t=arguments[0];return t(f.Z,{class:C([{first:this.isFirst,last:this.isLast},this.type]),attrs:{size:"large",type:this.type,icon:this.icon,color:this.color,loading:this.loading,disabled:this.disabled},on:{click:this.onClick}},[this.slots()||this.text])}}),_=(0,c.d)("dialog"),S=_[0],I=_[1],P=_[2],T=S({mixins:[(0,d.e)()],props:{title:String,theme:String,width:[Number,String],message:String,className:null,callback:Function,beforeClose:Function,messageAlign:String,cancelButtonText:String,cancelButtonColor:String,confirmButtonText:String,confirmButtonColor:String,showCancelButton:Boolean,overlay:{type:Boolean,default:!0},allowHtml:{type:Boolean,default:!0},transition:{type:String,default:"van-dialog-bounce"},showConfirmButton:{type:Boolean,default:!0},closeOnPopstate:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!1}},data:function(){return{loading:{confirm:!1,cancel:!1}}},methods:{onClickOverlay:function(){this.handleAction("overlay")},handleAction:function(t){var e=this;this.$emit(t),this.value&&(this.beforeClose?(this.loading[t]=!0,this.beforeClose(t,(function(i){!1!==i&&e.loading[t]&&e.onClose(t),e.loading.confirm=!1,e.loading.cancel=!1}))):this.onClose(t))},onClose:function(t){this.close(),this.callback&&this.callback(t)},onOpened:function(){var t=this;this.$emit("opened"),this.$nextTick((function(){var e;null==(e=t.$refs.dialog)||e.focus()}))},onClosed:function(){this.$emit("closed")},onKeydown:function(t){var e=this;if("Escape"===t.key||"Enter"===t.key){if(t.target!==this.$refs.dialog)return;var i={Enter:this.showConfirmButton?function(){return e.handleAction("confirm")}:l.ZT,Escape:this.showCancelButton?function(){return e.handleAction("cancel")}:l.ZT};i[t.key](),this.$emit("keydown",t)}},genRoundButtons:function(){var t=this,e=this.$createElement;return e(y,{class:I("footer")},[this.showCancelButton&&e(x,{attrs:{size:"large",type:"warning",text:this.cancelButtonText||P("cancel"),color:this.cancelButtonColor,loading:this.loading.cancel},class:I("cancel"),on:{click:function(){t.handleAction("cancel")}}}),this.showConfirmButton&&e(x,{attrs:{size:"large",type:"danger",text:this.confirmButtonText||P("confirm"),color:this.confirmButtonColor,loading:this.loading.confirm},class:I("confirm"),on:{click:function(){t.handleAction("confirm")}}})])},genButtons:function(){var t,e=this,i=this.$createElement,n=this.showCancelButton&&this.showConfirmButton;return i("div",{class:[h.k7,I("footer")]},[this.showCancelButton&&i(f.Z,{attrs:{size:"large",loading:this.loading.cancel,text:this.cancelButtonText||P("cancel"),nativeType:"button"},class:I("cancel"),style:{color:this.cancelButtonColor},on:{click:function(){e.handleAction("cancel")}}}),this.showConfirmButton&&i(f.Z,{attrs:{size:"large",loading:this.loading.confirm,text:this.confirmButtonText||P("confirm"),nativeType:"button"},class:[I("confirm"),(t={},t[h.a8]=n,t)],style:{color:this.confirmButtonColor},on:{click:function(){e.handleAction("confirm")}}})])},genContent:function(t,e){var i=this.$createElement;if(e)return i("div",{class:I("content")},[e]);var n=this.message,s=this.messageAlign;if(n){var o,a,l={class:I("message",(o={"has-title":t},o[s]=s,o)),domProps:(a={},a[this.allowHtml?"innerHTML":"textContent"]=n,a)};return i("div",{class:I("content",{isolated:!t})},[i("div",r()([{},l]))])}}},render:function(){var t=arguments[0];if(this.shouldRender){var e=this.message,i=this.slots(),n=this.slots("title")||this.title,s=n&&t("div",{class:I("header",{isolated:!e&&!i})},[n]);return t("transition",{attrs:{name:this.transition},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[t("div",{directives:[{name:"show",value:this.value}],attrs:{role:"dialog","aria-labelledby":this.title||e,tabIndex:0},class:[I([this.theme]),this.className],style:{width:(0,u.N)(this.width)},ref:"dialog",on:{keydown:this.onKeydown}},[s,this.genContent(n,i),"round-button"===this.theme?this.genRoundButtons():this.genButtons()])])}}});function $(t){return document.body.contains(t)}function Z(){n&&n.$destroy(),n=new(o.ZP.extend(T))({el:document.createElement("div"),propsData:{lazyRender:!1}}),n.$on("input",(function(t){n.value=t}))}function B(t){return l.sk?Promise.resolve():new Promise((function(e,i){n&&$(n.$el)||Z(),(0,s.Z)(n,B.currentOptions,t,{resolve:e,reject:i})}))}B.defaultOptions={value:!0,title:"",width:"",theme:null,message:"",overlay:!0,className:"",allowHtml:!0,lockScroll:!0,transition:"van-dialog-bounce",beforeClose:null,overlayClass:"",overlayStyle:null,messageAlign:"",getContainer:"body",cancelButtonText:"",cancelButtonColor:null,confirmButtonText:"",confirmButtonColor:null,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,callback:function(t){n["confirm"===t?"resolve":"reject"](t)}},B.alert=B,B.confirm=function(t){return B((0,s.Z)({showCancelButton:!0},t))},B.close=function(){n&&(n.value=!1)},B.setDefaultOptions=function(t){(0,s.Z)(B.currentOptions,t)},B.resetDefaultOptions=function(){B.currentOptions=(0,s.Z)({},B.defaultOptions)},B.resetDefaultOptions(),B.install=function(){o.ZP.use(T)},B.Component=T,o.ZP.prototype.$dialog=B;var D=B},8618:function(t,e,i){i(5623),i(4966),i(4933),i(3671),i(3979),i(6121),i(2195)},4639:function(t,e,i){var n=i(3915),s=i.n(n),o=i(855),a=i(3370),r=i(408),l=i(9858),c=(0,o.d)("image"),u=c[0],h=c[1];e["Z"]=u({props:{src:String,fit:String,alt:String,round:Boolean,width:[Number,String],height:[Number,String],radius:[Number,String],lazyLoad:Boolean,iconPrefix:String,showError:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!0},errorIcon:{type:String,default:"photo-fail"},loadingIcon:{type:String,default:"photo"}},data:function(){return{loading:!0,error:!1}},watch:{src:function(){this.loading=!0,this.error=!1}},computed:{style:function(){var t={};return(0,a.Xq)(this.width)&&(t.width=(0,r.N)(this.width)),(0,a.Xq)(this.height)&&(t.height=(0,r.N)(this.height)),(0,a.Xq)(this.radius)&&(t.overflow="hidden",t.borderRadius=(0,r.N)(this.radius)),t}},created:function(){var t=this.$Lazyload;t&&a._f&&(t.$on("loaded",this.onLazyLoaded),t.$on("error",this.onLazyLoadError))},beforeDestroy:function(){var t=this.$Lazyload;t&&(t.$off("loaded",this.onLazyLoaded),t.$off("error",this.onLazyLoadError))},methods:{onLoad:function(t){this.loading=!1,this.$emit("load",t)},onLazyLoaded:function(t){var e=t.el;e===this.$refs.image&&this.loading&&this.onLoad()},onLazyLoadError:function(t){var e=t.el;e!==this.$refs.image||this.error||this.onError()},onError:function(t){this.error=!0,this.loading=!1,this.$emit("error",t)},onClick:function(t){this.$emit("click",t)},genPlaceholder:function(){var t=this.$createElement;return this.loading&&this.showLoading?t("div",{class:h("loading")},[this.slots("loading")||t(l.Z,{attrs:{name:this.loadingIcon,classPrefix:this.iconPrefix},class:h("loading-icon")})]):this.error&&this.showError?t("div",{class:h("error")},[this.slots("error")||t(l.Z,{attrs:{name:this.errorIcon,classPrefix:this.iconPrefix},class:h("error-icon")})]):void 0},genImage:function(){var t=this.$createElement,e={class:h("img"),attrs:{alt:this.alt},style:{objectFit:this.fit}};if(!this.error)return this.lazyLoad?t("img",s()([{ref:"image",directives:[{name:"lazy",value:this.src}]},e])):t("img",s()([{attrs:{src:this.src},on:{load:this.onLoad,error:this.onError}},e]))}},render:function(){var t=arguments[0];return t("div",{class:h({round:this.round}),style:this.style,on:{click:this.onClick}},[this.genImage(),this.genPlaceholder(),this.slots()])}})},1247:function(t,e,i){i(5623),i(4933),i(3671),i(43)},7722:function(t,e,i){i.d(e,{Z:function(){return B}});var n=i(9299),s=i(855),o=i(5781),a=i(1047),r=i(7111),l=i(408),c=i(4958),u=i(3915),h=i.n(u),d=i(3370);function f(t){if(!(0,d.Xq)(t))return t;if(Array.isArray(t))return t.map((function(t){return f(t)}));if("object"===typeof t){var e={};return Object.keys(t).forEach((function(i){e[i]=f(t[i])})),e}return t}var m=i(4535),p=i(3969),v=200,g=300,y=15,b=(0,s.d)("picker-column"),w=b[0],k=b[1];function C(t){var e=window.getComputedStyle(t),i=e.transform||e.webkitTransform,n=i.slice(7,i.length-1).split(", ")[5];return Number(n)}function x(t){return(0,d.Kn)(t)&&t.disabled}var _=d._f&&"onwheel"in window,S=null,I=w({mixins:[p.D],props:{valueKey:String,readonly:Boolean,allowHtml:Boolean,className:String,itemHeight:Number,defaultIndex:Number,swipeDuration:[Number,String],visibleItemCount:[Number,String],initialOptions:{type:Array,default:function(){return[]}}},data:function(){return{offset:0,duration:0,options:f(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},mounted:function(){this.bindTouchEvent(this.$el),_&&(0,o.on)(this.$el,"wheel",this.onMouseWheel,!1)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1),_&&(0,o.S1)(this.$el,"wheel")},watch:{initialOptions:"setOptions",defaultIndex:function(t){this.setIndex(t)}},computed:{count:function(){return this.options.length},baseOffset:function(){return this.itemHeight*(this.visibleItemCount-1)/2}},methods:{setOptions:function(t){JSON.stringify(t)!==JSON.stringify(this.options)&&(this.options=f(t),this.setIndex(this.defaultIndex))},onTouchStart:function(t){if(!this.readonly){if(this.touchStart(t),this.moving){var e=C(this.$refs.wrapper);this.offset=Math.min(0,e-this.baseOffset),this.startOffset=this.offset}else this.startOffset=this.offset;this.duration=0,this.transitionEndTrigger=null,this.touchStartTime=Date.now(),this.momentumOffset=this.startOffset}},onTouchMove:function(t){if(!this.readonly){this.touchMove(t),"vertical"===this.direction&&(this.moving=!0,(0,o.PF)(t,!0)),this.offset=(0,m.w6)(this.startOffset+this.deltaY,-this.count*this.itemHeight,this.itemHeight);var e=Date.now();e-this.touchStartTime>g&&(this.touchStartTime=e,this.momentumOffset=this.offset)}},onTouchEnd:function(){var t=this;if(!this.readonly){var e=this.offset-this.momentumOffset,i=Date.now()-this.touchStartTime,n=i<g&&Math.abs(e)>y;if(n)this.momentum(e,i);else{var s=this.getIndexByOffset(this.offset);this.duration=v,this.setIndex(s,!0),setTimeout((function(){t.moving=!1}),0)}}},onMouseWheel:function(t){var e=this;if(!this.readonly){(0,o.PF)(t,!0);var i=C(this.$refs.wrapper);this.startOffset=Math.min(0,i-this.baseOffset),this.momentumOffset=this.startOffset,this.transitionEndTrigger=null;var n=t.deltaY;if(!(0===this.startOffset&&n<0)){var s=-n;this.offset=(0,m.w6)(this.startOffset+s,-this.count*this.itemHeight,this.itemHeight),S&&clearTimeout(S),S=setTimeout((function(){e.onTouchEnd(),e.touchStartTime=0}),g)}}},onTransitionEnd:function(){this.stopMomentum()},onClickItem:function(t){this.moving||this.readonly||(this.transitionEndTrigger=null,this.duration=v,this.setIndex(t,!0))},adjustIndex:function(t){t=(0,m.w6)(t,0,this.count);for(var e=t;e<this.count;e++)if(!x(this.options[e]))return e;for(var i=t-1;i>=0;i--)if(!x(this.options[i]))return i},getOptionText:function(t){return(0,d.Kn)(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){var i=this;t=this.adjustIndex(t)||0;var n=-t*this.itemHeight,s=function(){t!==i.currentIndex&&(i.currentIndex=t,e&&i.$emit("change",t))};this.moving&&n!==this.offset?this.transitionEndTrigger=s:s(),this.offset=n},setValue:function(t){for(var e=this.options,i=0;i<e.length;i++)if(this.getOptionText(e[i])===t)return this.setIndex(i)},getValue:function(){return this.options[this.currentIndex]},getIndexByOffset:function(t){return(0,m.w6)(Math.round(-t/this.itemHeight),0,this.count-1)},momentum:function(t,e){var i=Math.abs(t/e);t=this.offset+i/.003*(t<0?-1:1);var n=this.getIndexByOffset(t);this.duration=+this.swipeDuration,this.setIndex(n,!0)},stopMomentum:function(){this.moving=!1,this.duration=0,this.transitionEndTrigger&&(this.transitionEndTrigger(),this.transitionEndTrigger=null)},genOptions:function(){var t=this,e=this.$createElement,i={height:this.itemHeight+"px"};return this.options.map((function(n,s){var o,a=t.getOptionText(n),r=x(n),l={style:i,attrs:{role:"button",tabindex:r?-1:0},class:[k("item",{disabled:r,selected:s===t.currentIndex})],on:{click:function(){t.onClickItem(s)}}},c={class:"van-ellipsis",domProps:(o={},o[t.allowHtml?"innerHTML":"textContent"]=a,o)};return e("li",h()([{},l]),[t.slots("option",n)||e("div",h()([{},c]))])}))}},render:function(){var t=arguments[0],e={transform:"translate3d(0, "+(this.offset+this.baseOffset)+"px, 0)",transitionDuration:this.duration+"ms",transitionProperty:this.duration?"all":"none"};return t("div",{class:[k(),this.className]},[t("ul",{ref:"wrapper",style:e,class:k("wrapper"),on:{transitionend:this.onTransitionEnd}},[this.genOptions()])])}}),P=(0,s.d)("picker"),T=P[0],$=P[1],Z=P[2],B=T({props:(0,n.Z)({},r.i,{defaultIndex:{type:[Number,String],default:0},columns:{type:Array,default:function(){return[]}},toolbarPosition:{type:String,default:"top"},valueKey:{type:String,default:"text"}}),data:function(){return{children:[],formattedColumns:[]}},computed:{itemPxHeight:function(){return this.itemHeight?(0,l.L)(this.itemHeight):r.f},dataType:function(){var t=this.columns,e=t[0]||{};return e.children?"cascade":e.values?"object":"text"}},watch:{columns:{handler:"format",immediate:!0}},methods:{format:function(){var t=this.columns,e=this.dataType;"text"===e?this.formattedColumns=[{values:t}]:"cascade"===e?this.formatCascade():this.formattedColumns=t},formatCascade:function(){var t=[],e={children:this.columns};while(e&&e.children){var i,n=e,s=n.children,o=null!=(i=e.defaultIndex)?i:+this.defaultIndex;while(s[o]&&s[o].disabled){if(!(o<s.length-1)){o=0;break}o++}t.push({values:e.children,className:e.className,defaultIndex:o}),e=s[o]}this.formattedColumns=t},emit:function(t){var e=this;if("text"===this.dataType)this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0));else{var i=this.getValues();"cascade"===this.dataType&&(i=i.map((function(t){return t[e.valueKey]}))),this.$emit(t,i,this.getIndexes())}},onCascadeChange:function(t){for(var e={children:this.columns},i=this.getIndexes(),n=0;n<=t;n++)e=e.children[i[n]];while(e&&e.children)t++,this.setColumnValues(t,e.children),e=e.children[e.defaultIndex||0]},onChange:function(t){var e=this;if("cascade"===this.dataType&&this.onCascadeChange(t),"text"===this.dataType)this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0));else{var i=this.getValues();"cascade"===this.dataType&&(i=i.map((function(t){return t[e.valueKey]}))),this.$emit("change",this,i,t)}},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var i=this.getColumn(t);i&&(i.setValue(e),"cascade"===this.dataType&&this.onCascadeChange(t))},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var i=this.getColumn(t);i&&(i.setIndex(e),"cascade"===this.dataType&&this.onCascadeChange(t))},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var i=this.children[t];i&&i.setOptions(e)},getValues:function(){return this.children.map((function(t){return t.getValue()}))},setValues:function(t){var e=this;t.forEach((function(t,i){e.setColumnValue(i,t)}))},getIndexes:function(){return this.children.map((function(t){return t.currentIndex}))},setIndexes:function(t){var e=this;t.forEach((function(t,i){e.setColumnIndex(i,t)}))},confirm:function(){this.children.forEach((function(t){return t.stopMomentum()})),this.emit("confirm")},cancel:function(){this.emit("cancel")},genTitle:function(){var t=this.$createElement,e=this.slots("title");return e||(this.title?t("div",{class:["van-ellipsis",$("title")]},[this.title]):void 0)},genCancel:function(){var t=this.$createElement;return t("button",{attrs:{type:"button"},class:$("cancel"),on:{click:this.cancel}},[this.slots("cancel")||this.cancelButtonText||Z("cancel")])},genConfirm:function(){var t=this.$createElement;return t("button",{attrs:{type:"button"},class:$("confirm"),on:{click:this.confirm}},[this.slots("confirm")||this.confirmButtonText||Z("confirm")])},genToolbar:function(){var t=this.$createElement;if(this.showToolbar)return t("div",{class:$("toolbar")},[this.slots()||[this.genCancel(),this.genTitle(),this.genConfirm()]])},genColumns:function(){var t=this.$createElement,e=this.itemPxHeight,i=e*this.visibleItemCount,n={height:e+"px"},s={height:i+"px"},r={backgroundSize:"100% "+(i-e)/2+"px"};return t("div",{class:$("columns"),style:s,on:{touchmove:o.PF}},[this.genColumnItems(),t("div",{class:$("mask"),style:r}),t("div",{class:[a.pj,$("frame")],style:n})])},genColumnItems:function(){var t=this,e=this.$createElement;return this.formattedColumns.map((function(i,n){var s;return e(I,{attrs:{readonly:t.readonly,valueKey:t.valueKey,allowHtml:t.allowHtml,className:i.className,itemHeight:t.itemPxHeight,defaultIndex:null!=(s=i.defaultIndex)?s:+t.defaultIndex,swipeDuration:t.swipeDuration,visibleItemCount:t.visibleItemCount,initialOptions:i.values},scopedSlots:{option:t.$scopedSlots.option},on:{change:function(){t.onChange(n)}}})}))}},render:function(t){return t("div",{class:$()},["top"===this.toolbarPosition?this.genToolbar():t(),this.loading?t(c.Z,{class:$("loading")}):t(),this.slots("columns-top"),this.genColumns(),this.slots("columns-bottom"),"bottom"===this.toolbarPosition?this.genToolbar():t()])}})},7111:function(t,e,i){i.d(e,{f:function(){return n},i:function(){return s}});var n=44,s={title:String,loading:Boolean,readonly:Boolean,itemHeight:[Number,String],showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,allowHtml:{type:Boolean,default:!0},visibleItemCount:{type:[Number,String],default:6},swipeDuration:{type:[Number,String],default:1e3}}},9293:function(t,e,i){i(5623),i(6121),i(5941)},8606:function(t,e,i){i.d(e,{FY:function(){return a},RD:function(){return o},qr:function(){return s}});var n=i(7877);function s(t){return n.Z.post("/user/updatePwd",t)}function o(t){return n.Z.post("/user/sendSms",t)}function a(t){return n.Z.post("/user/forget",t)}},4153:function(t,e,i){i.d(e,{n:function(){return n}});i(1703);function n(t){try{t instanceof Date||(t=new Date(t));let e=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();return[e,i,n].map((t=>(t+"").length>1?t:"0"+t)).join("/")}catch(e){throw new Error(t+"必须是符合日期格式的字符串,或者时间戳,或者日期对象")}}},3550:function(t){t.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=about.7b61d583.js.map